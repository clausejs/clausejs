!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.C=t():e.C=t()}(this,function(){return function(e){function __webpack_require__(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,__webpack_require__),r.l=!0,r.exports}var t={};return __webpack_require__.m=e,__webpack_require__.c=t,__webpack_require__.i=function(e){return e},__webpack_require__.d=function(e,t,n){__webpack_require__.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},__webpack_require__.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return __webpack_require__.d(t,"a",t),t},__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=87)}([function(e,t,n){"use strict";function isProblem(e){return e instanceof r.default}Object.defineProperty(t,"__esModule",{value:!0});var r=n(2);t.default=isProblem},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function Clause(e){var t=e.type,n=e.exprs,r=e.opts,a=e.conformFn,u=e.generateFn;if(this.type=t,r&&(this.opts=r),a&&(this.conform=a),u&&(this.generate=u),!n)throw new Error("Expressions are required when constructing a clause.");this.exprs=n}return Clause}();t.default=r},function(e,t,n){"use strict";function _constructMessage(e,t){var n=e.subproblems,a=e.val,o=e.shortMessage;if(Array.isArray(n)){var l;return 0===n.length?o+"; val: "+u.default(a,null,2):(l=n.map(function(e){return""+_open(t)+_constructMessage(e,t+1)+_close(t)}),o+", because\n"+_repeatStr(" ",2*t)+" "+l.join(", "))}if("object"===("undefined"==typeof n?"undefined":r(n))){l=[];for(var s in n)n.hasOwnProperty(s)&&l.push("-> "+s+": "+_open(t)+" "+_constructMessage(n[s],t+1)+_close(t));return o+", because\n"+_repeatStr(" ",2*t)+" "+l.join(", ")}}function _repeatStr(e,t){for(var n="",r=0;r<t;r+=1)n+=e;return n}function _open(e){return a[e]}function _close(e){return a[a.length-e-1]}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(t,"__esModule",{value:!0});var a="❰❮❬❨❪﹙₍₎﹚❫❩❭❯❱",u=n(19),o=n(68),l=function(){function Problem(e,t,n,r){var a=this;if(this.isProblem=!0,4!==arguments.length)throw"Problem arg len err";this.val=e,this.name="Problem",this.failsPredicate=t,this.shortMessage=r,this.subproblems=n,o.default(this,"message",function(){return _constructMessage(a,0)}),this.toString=function(){return a.message}}return Problem}();t.default=l},function(e,t,n){"use strict";function getFunctionName(e){return a.default(e)?e.__predToString?e.__predToString():r?r(e):e.name:null}Object.defineProperty(t,"__esModule",{value:!0});var r,a=n(13),u=n(70);if("test"!==function(){}.name){var o=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,l=Function.prototype.toString,s=String.prototype.match,i=String.prototype.replace,f=new RegExp("^["+u.default+"]*(?:function|class)["+u.default+"]*\\*?["+u.default+"]+([\\w\\$]+)["+u.default+"]*","i");r=function(e){var t=s.call(i.call(l.call(e),o," "),f);return t&&"anonymous"!==t[1]?t[1]:""}}else"anonymous"===(new Function).name&&(r=function(e){return e.name&&"anonymous"!==e.name?e.name:""});t.default=getFunctionName},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),a=n(21),u=a.default(r.default);t.default=u},function(e,t,n){"use strict";function _labelled(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return{expressions:{withLabels:e.map(function(e){var t=e[0],n=e[1],r=e[2];return{name:t,expr:(a={},a[n]=r,a)};var a})}}}function _unlabelled(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return{expressions:{withoutLabels:e.map(function(e){var t=e[0],n=e[1];return r={},r[t]=n,r;var r})}}}function andOp(e){var t=new r.default({type:"AND",exprs:[],opts:{conformedExprs:e},conformFn:function(e){return v.default(t,e,{conform:!0})},generateFn:null});return t}function noDupelicateLabels(e){var t=e.expressions.withLabels;if(t)for(var n=[],r=0;r<t.length;r+=1){var a=t[r].name;if(n.indexOf(a)>=0)throw new Error("Duplicate label detected: "+a);n.push(a)}return!0}function genMultiArgOp(e){return i.default(e,function(t){var n,a=t.expressions,u=a.withLabels,l=a.withoutLabels,s=t.options;if(u){n=u;var i=n.map(function(e){var t=e.expr,n=o.default(t);return Object.assign({},e,{expr:n,clause:void 0,pred:void 0,clauseRef:void 0,delayedClause:void 0})}),f=Object.assign({},s,{named:!0}),c=new r.default({type:e,exprs:i,opts:f,conformFn:function(e){return v.default(c,e,{conform:!0})},generateFn:null});return c}if(l){n=l,i=n.map(function(e){var t;if(e.clause)return t=e.clause,Object.assign({},e,{expr:t,clause:void 0});if(e.pred)return t=p.default(e.pred),Object.assign({},e,{expr:t,pred:void 0});if(e.clauseRef)return t=e.clauseRef,Object.assign({},e,{expr:t,clauseRef:void 0});if(e.delayedClause)return t=e.delayedClause,Object.assign({},e,{expr:t,delayedClause:void 0});throw console.error(e),"!"});var f=Object.assign({},s,{named:!1});return c=new r.default({type:e,exprs:i,opts:f,conformFn:function(e){return v.default(c,e,{conform:!0})},generateFn:null})}return c=new r.default({type:e,exprs:[],opts:{},conformFn:function(e){return v.default(c,e,{conform:!0})},generateFn:null})})}function genSingleArgOp(e){return i.default(e,function(t){var n,a=t.expr,u=t.opts;if(a.clause)n=a.clause;else if(a.pred)n=p.default(a.pred);else if(a.clauseRef)n=a.clauseRef;else{if(!a.delayedClause)throw console.error(a),"internal err";n=a.delayedClause}var o=p.default(n),l=new r.default({type:e,exprs:[o],opts:Object.assign({},u,{enclosedClause:o}),conformFn:null,generateFn:null});return l.conform=function(e){return v.default(l,e,{conform:!0})},l})}function isPropName(e){return g.default(e)}function mapOfOp(e){if(l.default(e))throw e;var t=e.keyExpression,n=e.valExpression,a=new r.default({type:j,exprs:[],opts:{keyExpression:t,valExpression:n},conformFn:function(e){return v.default(a,e,{conform:!0})},generateFn:null});return a}function shapeOp(e){if(l.default(e))throw e;var t=new r.default({type:S,exprs:[],opts:{conformedArgs:e},conformFn:function(e){return v.default(t,e,{conform:!0})},generateFn:null});return t}Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),a=n(4),u=n(11),o=n(6),l=n(0),s=n(41),i=n(16),f=n(15),c=n(25),d=n(47),p=n(9),m=n(30);t.fclause=m.default;var v=n(17),_=n(23),g=n(7),y=n(38),h=n(37),b=p.default(a.default),O=p.default(s.default),P=genMultiArgOp(d.default.CAT),C=genMultiArgOp(d.default.OR),E=genSingleArgOp(d.default.Z_OR_M),x=genSingleArgOp(d.default.O_OR_M),w=genSingleArgOp(d.default.Z_OR_O),F=genSingleArgOp(d.default.COLL_OF);t.ClauseClause=p.default(a.default),t.ClauseRefClause=p.default(f.default),t.DelayedClauseClause=p.default(c.default),t.PredClause=p.default(u.default),t.ExprClause=C(_labelled(["clause","clause",t.ClauseClause],["pred","clause",t.PredClause])),t.NameExprOptionalComment=P(_labelled(["name","clause",O],["comment","clause",w({expr:{pred:g.default}})],["expr","clause",t.ExprClause])),t.MultipleArgClause=P(_labelled(["expressions","clause",C(_labelled(["withLabels","clause",C(_unlabelled(["clause",E({expr:{clause:t.NameExprOptionalComment}})],["clause",F({expr:{clause:t.NameExprOptionalComment}})]))],["withoutLabels","clause",E({expr:{clause:t.ExprClause}})]))],["options","clause",w({expr:{pred:h.default}})]));var M=andOp([{clause:t.MultipleArgClause},{pred:noDupelicateLabels}]);t.AndFnClause=m.default({args:x({expr:{clause:t.ExprClause}}),ret:a.default});var N={args:M,ret:b},A=function(e){return{args:P(_labelled(["expr","clause",t.ExprClause],["opts","clause",w({expr:e})])),ret:b}},S="SHAPE",j="MAP_OF",k=mapOfOp({keyExpression:{clause:p.default(g.default)},valExpression:{clause:C(_labelled(["valExpressionOnly","clause",t.ExprClause],["keyValExprPair","clause",P(_labelled(["keyExpression","clause",t.ExprClause],["valExpression","clause",t.ExprClause]))]))}}),R=E({expr:{pred:isPropName}}),T=C(_labelled(["keyList","clause",R],["fieldDefs","clause",k]));t.ShapeArgs=shapeOp({shapeArgs:{optionalFields:{opt:{fieldDefs:{requiredFields:{keyValExprPair:{keyExpression:{pred:y.default("req","required")},valExpression:{clause:T}}},optionalFields:{keyValExprPair:{keyExpression:{pred:y.default("opt","optional")},valExpression:{clause:T}}}}}}}}),t.MapOfFnClause=m.default({args:P(_labelled(["keyExpression","clause",t.ExprClause],["valExpression","clause",t.ExprClause])),ret:a.default}),t.TestClause=shapeOp({shapeArgs:{optionalFields:{opt:{fieldDefs:{requiredFields:{keyValExprPair:{keyExpression:{pred:y.default("req","required")},valExpression:{clause:T}}},optionalFields:{keyValExprPair:{keyExpression:{pred:y.default("opt","optional")},valExpression:{clause:T}}}}}}}}),t.ShapeFnClause=m.default({args:P(_labelled(["shapeArgs","clause",t.ShapeArgs])),ret:a.default}),t.shape=t.ShapeFnClause.instrumentConformed(shapeOp),t.keys=t.shape,t.mapOf=t.MapOfFnClause.instrumentConformed(mapOfOp),t.CollOfClause=m.default(A({pred:_.default})),t.collOf=t.CollOfClause.instrumentConformed(F),t.CatFnClause=m.default(N),t.OrFnClause=m.default(N),t.ZeroOrMoreFnClause=m.default(A({pred:_.default})),t.OneOrMoreFnClause=m.default(A({pred:_.default})),t.ZeroOrOneFnClause=m.default(A({pred:_.default})),t.and=t.AndFnClause.instrumentConformed(andOp),t.cat=t.CatFnClause.instrumentConformed(P),t.or=t.OrFnClause.instrumentConformed(C),t.zeroOrMore=t.ZeroOrMoreFnClause.instrumentConformed(E),t.oneOrMore=t.OneOrMoreFnClause.instrumentConformed(x),t.zeroOrOne=t.ZeroOrOneFnClause.instrumentConformed(w);var L={cat:t.cat,or:t.or,zeroOrMore:t.zeroOrMore,oneOrMore:t.oneOrMore,zeroOrOne:t.zeroOrOne,ExprClause:t.ExprClause,ClauseClause:t.ClauseClause,PredClause:t.PredClause,DelayedClauseClause:t.DelayedClauseClause,ClauseRefClause:t.ClauseRefClause,CatFnClause:t.CatFnClause,AndFnClause:t.AndFnClause,OrFnClause:t.OrFnClause,ZeroOrMoreFnClause:t.ZeroOrMoreFnClause,OneOrMoreFnClause:t.OneOrMoreFnClause,ZeroOrOneFnClause:t.ZeroOrOneFnClause,CollOfClause:t.CollOfClause,collOf:t.collOf,and:t.and,shape:t.shape,keys:t.shape,mapOf:t.mapOf,ShapeFnClause:t.ShapeFnClause,MapOfFnClause:t.MapOfFnClause};L.alt=L.or,L["*"]=L.zeroOrMore,L["+"]=L.oneOrMore,L["?"]=L.zeroOrOne,t.default=L},function(e,t,n){"use strict";function clauseFromAlts(e){if(!e)throw console.error(e),"!";if(e.clause)return e.clause;if(e.pred)return r.default(e.pred);throw console.error("unsupported:",e),"Not implemented"}Object.defineProperty(t,"__esModule",{value:!0});var r=n(9);t.default=clauseFromAlts},function(e,t,n){"use strict";function isString(e){return null!==e&&void 0!==e&&e.constructor===String}Object.defineProperty(t,"__esModule",{value:!0}),t.default=isString},function(e,t,n){"use strict";function __export(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0});var r=n(5),a=n(5);t.shape=a.shape,t.keys=a.keys,t.mapOf=a.mapOf,t.fclause=a.fclause,t.fspec=a.fclause;var u=n(53);t.nullable=u.default;var o=n(54);t.undefinable=o.default;var l=n(48);t.maybe=l.default;var s=n(45);t.wall=s.default,t.clause=s.default;var i=n(33),f=n(46);t.any=f.default;var c=function(e){return a.cat.apply(null,Array.prototype.slice.call(e).map(i.default))};t.cstr=c;var d={any:f.default,fclause:a.fclause,wall:s.default,clause:s.default,nullable:u.default,undefinable:o.default,maybe:l.default,cstr:c};__export(n(5));var p=Object.assign({},r.default,{shape:a.shape,keys:a.keys,mapOf:a.mapOf,fspec:a.fclause},d);t.default=p},function(e,t,n){"use strict";function coerceIntoClause(e){if(a.default(e)||u.default(e)||o.default(e))return e;if(r.default(e))return _wrap(e);throw console.error(e),new Error("'Expression must either be a Clause object or a predication function that returns true or false. Given value: "+f.default(e)+"'")}function _wrap(e){return new l.default({type:c,exprs:[e],opts:{predicate:e},conformFn:predConformer(e),generateFn:null})}function predConformer(e){return function(t){return e(t)?t:new s.default(t,e,[],"Predicate "+i.default(e)+" returns false")}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(11),a=n(4),u=n(15),o=n(25),l=n(1),s=n(2),i=n(3),f=n(19),c="PRED";t.default=coerceIntoClause},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(27);t.sExpression=r.default;var a=n(29);t.describe=a.default;var u=n(24);t.conform=u.default;var o=n(67);t.isValid=o.default;var l=n(66);t.isNamespacePath=l.default;var s=n(40);t.identity=s.default;var i=n(0);t.isProblem=i.default;var f=n(62);t.enforce=f.default;var c=n(4);t.isClause=c.default;var d=n(65);t.isFclause=d.default;var p=n(15);t.isClauseRef=p.default;var m=n(28);t.deref=m.default;var v=n(41);t.isClauseName=v.default;var _=n(18);t.match=_.default;var g=n(39);t.delayed=g.default},function(e,t,n){"use strict";function isPred(e){return r.default(e)}Object.defineProperty(t,"__esModule",{value:!0});var r=n(13);t.default=isPred},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(36);t.isNum=r.default,t.isNumber=r.default;var a=n(57);t.isNatInt=a.default,t.isNaturalNumber=a.default;var u=n(35);t.isInt=u.default,t.isInteger=u.default;var o=n(34);t.isBool=o.default,t.isBoolean=o.default;var l=n(13);t.isFn=l.default,t.isFunction=l.default;var s=n(23);t.isObj=s.default,t.isObject=s.default;var i=n(37);t.isPlainObj=i.default,t.isPlainObject=i.default;var f=n(33);t.equals=f.default,t.equal=f.default,t.equalsTo=f.default,t.eq=f.default;var c=n(38);t.oneOf=c.default;var d=n(7);t.isStr=d.default,t.isString=d.default;var p=n(56);t.isDate=p.default;var m=n(59);t.not=m.default;var v=n(21);t.instanceOf=v.default;var _=n(58);t.isUuid=_.default,t.isUUID=_.default;var g=n(22);t.isNull=g.default;var y=n(14);t.isUndefined=y.default;var h=n(60);t.notEmpty=h.default;var b=Array.isArray;t.isArray=b,t.isArr=b},function(e,t,n){"use strict";function isFunction(e){var t={};return(e||!1)&&["[object Function]","[object GeneratorFunction]"].indexOf(t.toString.call(e))>=0}Object.defineProperty(t,"__esModule",{value:!0}),t.default=isFunction},function(e,t,n){"use strict";function isUndefined(e){return void 0===e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=isUndefined},function(e,t,n){"use strict";function isClauseRef(e){return e instanceof r.default}Object.defineProperty(t,"__esModule",{value:!0});var r=n(31);t.default=isClauseRef},function(e,t,n){"use strict";function getNamedFn(e,t,n){if(e){var r="return function "+e+(n||"")+"(){ return action.apply(this, arguments); };";return new Function("action",r)(t)}return t}Object.defineProperty(t,"__esModule",{value:!0}),t.default=getNamedFn},function(e,t,n){"use strict";function walk(e,t,n){var r=n.phase,a=_getWalker(e);if(r){if(a[r])return a[r](t,n);throw"!"}var u=a.trailblaze(t,Object.assign({phase:"trailblaze"},n));return v.default(u)?u:a.reconstruct(u,Object.assign({phase:"reconstruct"},n))}function _getWalker(e){var t=m.default(e),n=_[t.type];if(!n)throw"unsupported type "+t.type;var r=n(t,walk);return r}Object.defineProperty(t,"__esModule",{value:!0});var r=n(72),a=n(79),u=n(81),o=n(76),l=n(80),s=n(71),i=n(74),f=n(77),c=n(73),d=n(75),p=n(78),m=n(9),v=n(0);t.default=walk;var _={OR:p.default,CAT:p.default,COLL_OF:i.default,ANY:r.default,Z_OR_M:p.default,O_OR_M:p.default,Z_OR_O:p.default,PRED:a.default,WALL:u.default,SHAPE:l.default,AND:s.default,CLAUSE_REF:c.default,DELAYED:d.default,FCLAUSE:o.default,MAP_OF:f.default}},function(e,t,n){"use strict";function match(e,t,n){for(var r in e)return e.hasOwnProperty(r)&&t.hasOwnProperty(r)?t[r](e[r]):n(e[r]);throw console.error(e),new Error("No cases present in the given object")}Object.defineProperty(t,"__esModule",{value:!0}),t.default=match},function(e,t,n){"use strict";function stringifyWithFnName(e,t,n){var u=Array.prototype.slice.call(arguments);return u[1]=function(e,n){var u;if(r.default(n)){var o=a.default(n);u=o?o+"()":n.toString()}else u=n;return t?t(u):u},JSON.stringify.apply(this,u)}Object.defineProperty(t,"__esModule",{value:!0});var r=n(13),a=n(3);t.default=stringifyWithFnName},function(e,t,n){"use strict";(function(e){function _getUnchecked(e){function getFn(t){var n=r;n=t?t+e:e;var a=d.get(r,_slashToDot(n));return a?Object.assign(a[".expr"],a[".meta"]):void 0}var t=new a.default({ref:e,getFn:getFn,conformFn:null});return t.conform=function(e){var t=getFn();return i.default(t,e,{conform:!0})},t}function _slashToDot(e){return e.replace(/^(.+)(\/)(.+)$/,"$1.$3").replace(/^\//,"")}function getNamespacePath(e){var t,n=e.nsPath,r=v(n);return t=r}function setNamespacePath(e){var t=e.nsPath,n=e.expression;_processVal(t,n)}function _processVal(e,t){if(t){if(t.clause||t.pred){var n=t.clause||t.pred;return g(e,{".expr":n}),n}throw console.error(t),"!"}throw console.error(t),"!"}function _maybeInitRegistry(){return r||clearRegistry(),r}function clearRegistry(){r=e[y]={}}function resolve(e,n){return n?f.default(e,n):f.default(e,t.getRegistry())}Object.defineProperty(t,"__esModule",{value:!0});var r,a=n(31),u=n(8),o=n(4),l=n(11),s=n(34),i=n(17),f=n(42),c=n(9),d=n(55),p=n(10),m=n(26),v=u.fclause({args:u.cat(p.isNamespacePath),ret:p.isClauseRef}).instrument(_getUnchecked),_=u.shape({req:{".expr":u.or(o.default,l.default)}}),g=u.fclause({args:u.cat(p.isNamespacePath,_),ret:s.default}).instrument(function(e,t){_maybeInitRegistry();var n=d.get(r,_slashToDot(e));return d.set(r,_slashToDot(e),Object.assign({},n,t)),!0}),y="___CLAUSEJS_REGISTRY";t.clearRegistry=clearRegistry,t.setMeta=m.SetMetaFnClause.instrumentConformed(function(e){var t=e.source,n=t.namespacePath,a=t.expression,u=e.metaObj,o=e.registry;if(o||(o=r),n){var l=d.get(o,_slashToDot(n)),s=l&&l[".meta"];d.set(o,_slashToDot(n),Object.assign({},l,{".meta":Object.assign({},s,u)}))}else if(a){var i=c.default(a);i.meta=Object.assign(i.meta,u)}}),t.getMeta=m.GetMetaFnClause.instrumentConformed(function(e){var t=e.source,n=t.namespacePath,a=t.expression,u=e.registry;if(u||(u=r),n){var o=d.get(u,_slashToDot(n)),l=o&&o[".meta"];return l}if(a){var s=c.default(a);return s.meta}}),t.resolve=resolve,_maybeInitRegistry(),t.getRegistry=function(){return r};var h=m.NamespaceFnClause.instrumentConformed(function(e){var t=e.register,n=e.retrieve;return t?setNamespacePath(t):n?getNamespacePath(n):void 0});t.get=m.GetNSFnClause.instrumentConformed(getNamespacePath),t.set=m.SetNSFnClause.instrumentConformed(setNamespacePath),h.get=t.get,h.set=t.set,h.clearRegistry=clearRegistry,h.getRegistry=t.getRegistry,h.setMeta=t.setMeta,t.default=h}).call(t,n(82))},function(e,t,n){"use strict";function instanceOf(e){var t,n=r.default(e);return t=function(t){return t instanceof e},n&&(t=a.default("instanceOf_"+n,t)),t}Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),a=n(16);t.default=instanceOf},function(e,t,n){"use strict";function isNull(e){return null===e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=isNull},function(e,t,n){"use strict";function isObject(e){return"object"===("undefined"==typeof e?"undefined":r(e))&&null!==e}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(t,"__esModule",{value:!0}),t.default=isObject},function(e,t,n){"use strict";function conform(e,t,n){if(e&&r.default(e)){var a=e.conform(t);return a}throw new Error("Expression needs to be of type Clause. expression: \n"+e+"\n offending value: "+t)}Object.defineProperty(t,"__esModule",{value:!0});var r=n(4);t.default=conform},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(32),a=n(21),u=a.default(r.default);t.default=u},function(e,t,n){"use strict";function isNamespaceFragment(e){return!!/^[^.@%\&\*#]+/.test(e)}Object.defineProperty(t,"__esModule",{value:!0});var r=n(8),a=n(10);t.isClauseRef=a.isClauseRef;var u=n(10);t.isNamespacePath=u.isNamespacePath;var o=n(12),l=n(64),s=a.delayed(function(){return r.ExprClause});t.GetArgClause=r.cat("nsPath",a.isNamespacePath),t.GetNSFnClause=r.fclause({args:t.GetArgClause,ret:a.isClauseRef}),t.SetArgClause=r.cat("nsPath",a.isNamespacePath,"expression",s),t.SetNSFnClause=r.fclause({args:t.SetArgClause,ret:o.isBool}),t.NamespaceArgsCLause=r.or("register",t.SetArgClause,"retrieve",t.GetArgClause),t.NamespaceFnClause=r.fclause({args:t.NamespaceArgsCLause,ret:r.or(o.isUndefined,a.isClauseRef)}),t.SetMetaFnClause=r.fclause({args:r.cat("source",r.or("namespacePath",a.isNamespacePath,"expression",r.ExprClause),"metaObj",o.isObj,"registry",r.zeroOrOne(o.isObj)),ret:o.isUndefined}),t.GetMetaFnClause=r.fclause({args:r.cat("source",r.or("namespacePath",a.isNamespacePath,"expression",r.ExprClause),"registry",r.zeroOrOne(o.isObj)),ret:r.maybe(o.isObj)}),t.ResolveFnClause=r.fclause({args:r.cat("expression",r.ExprClause,"registry",r.zeroOrOne(o.isObj)),ret:a.isNamespacePath}),t.isNamespaceFragment=isNamespaceFragment,t.NamespaceObjClause=r.shape({optional:{subNamespaces:[isNamespaceFragment,a.delayed(function(){return t.NamespaceObjClause})],".meta":o.isObj,".expr":l.default}})},function(e,t,n){"use strict";function QuotedParamsMap(e){Object.assign(this,e)}function UnquotedParamsMap(e){Object.assign(this,e)}function Quoted(e){this.value=e}function genClauses(e){var t=u.or("sExpression",o.default(function(){return n}),"quotedParamsMap",o.default(function(){return a}),"unquotedParamsMap",o.default(function(){return l}),"optionsObj",i.isPlainObj,"recursive",i.instanceOf(f)),n=u.wall(u.cat("head",e,"params",u.or("labelled",u.zeroOrMore(u.cat("label",c,"item",o.default(function(){return t}))),"unlabelled",u.zeroOrMore(u.cat("item",o.default(function(){return t})))))),r=u.mapOf(u.any,u.maybe(u.or("keyList",u.zeroOrMore(o.default(function(){return c})),"singleParam",o.default(function(){return t})))),a=u.and(i.instanceOf(QuotedParamsMap),o.default(function(){return r})),l=u.and(i.instanceOf(UnquotedParamsMap),o.default(function(){return r}));return[n,t]}function _fieldDefToFrags(e,t){var n=t.fieldDefs,r=t.keyList;if(n){var u=new QuotedParamsMap;for(var o in n)if(n.hasOwnProperty(o)){var s=l.default(n[o],{keyValExprPair:function(t){return _handleKeyValExprPair(e,t)},valExpressionOnly:function(t){return _createSExpr(e,a.default(t))}},function(){throw"!g"});Object.assign(u,(i={},i[o]=s,i))}return u}if(r)return r;throw"!w";var i}function _handleKeyValExprPair(e,t){var n=t.keyExpression,r=t.valExpression;return new UnquotedParamsMap({key:_createSExpr(e,a.default(n)),val:_createSExpr(e,a.default(r))})}function _params(e,t){var n=m[t.type];if(n){var r=n(e,t);return r}throw console.error(t),new Error("Unsupported clause type "+t.type+".")}function _createSExpr(e,t){if(_exists(e,t))return new f(t);var n,r=s.default(t),a=e;if("DELAYED"===r.type||"CLAUSE_REF"===r.type)return n=r.get(),_createSExpr(e,n);n=r,a=_addToRepo(e,r);var u=_params(a,n);return[n].concat(u)}function _addToRepo(e,t){if(!_exists(e,t))return e.concat([t])}function _exists(e,t){return e.indexOf(t)>=0}function sExpression(e){var t=[];return _createSExpr(t,e)}Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),a=n(6),u=n(8),o=n(39),l=n(18),s=n(9),i=n(12),f=function(){function Recursive(e){this.isRecursive=!0,this.expression=e}return Recursive}();t.Recursive=f,t.QuotedParamsMap=QuotedParamsMap,t.UnquotedParamsMap=UnquotedParamsMap;var c=u.or("str",i.isStr,"quoted",i.instanceOf(Quoted));t.genClauses=genClauses,t.SExpressionClause=(v=genClauses(u.ExprClause),v[0]),t.ParamItemClause=v[1];var d=function(e,t){var n=t.opts.enclosedClause;return[_createSExpr(e,n)]},p=function(e,t){var n=t.opts.named,r=t.exprs;if(0===r.length)return[];if(n){var a=r.reduce(function(t,n){var r=n.name,a=n.expr;return t.concat([new Quoted(r),_createSExpr(e,a)])},[]);return a}return r.reduce(function(t,n){var r=n.expr;return t.concat([_createSExpr(e,r)])},[])},m={PRED:function(){return[]},WALL:function(e,t){var n=t.opts.enclosedClause;return[_createSExpr(e,n)]},AND:function(e,t){var n=t.opts.conformedExprs;return n.map(a.default).map(function(t){return _createSExpr(e,t)})},CAT:p,OR:p,Z_OR_M:d,O_OR_M:d,Z_OR_O:d,COLL_OF:d,ANY:function(){return[]},MAP_OF:function(e,t){var n=t.opts;return _handleKeyValExprPair(e,n)},SHAPE:function(e,t){var n=t.opts.conformedArgs.shapeArgs,r=n.optionalFields,a=void 0===r?{}:r,u=a.opt,o=void 0===u?null:u,l=a.optional,s=void 0===l?null:l,i=n.requiredFields,f=void 0===i?{}:i,c=f.req,d=void 0===c?null:c,p=f.required,m=void 0===p?null:p;return Object.assign(new UnquotedParamsMap,d||m?{required:_fieldDefToFrags(e,d||m)}:{},o||s?{optional:_fieldDefToFrags(e,o||s)}:{})},FCLAUSE:function(e,t){var n=t.opts,a=n.args,u=n.ret,o=n.fn;return Object.assign(new UnquotedParamsMap,a?{args:_createSExpr(e,a)}:{},u?{ret:_createSExpr(e,u)}:{},o?{fn:[r.default(o)+"()"]}:{})}};t.default=sExpression;var v},function(e,t,n){"use strict";function deref(e){for(var t=e;t.get;)t=t.get();return t}Object.defineProperty(t,"__esModule",{value:!0}),t.default=deref},function(e,t,n){"use strict";function describe(e,t,n){var a=r.default(e),u=r.SExpressionClause.conform(a);if(o.default(u))throw console.error(u),new Error("The given expression is not a valid expression.");var l=_strFragments(u,t),s=0,i=fragsToStr(l,s,n);return i}function _strFragments(e,t){return strFragments(function(e){var t=e.head,n=e.params;return{head:s.default(t),params:n}},e,t)}function strFragments(e,n,r){var u=e(n),o=u.head,l=u.params;if(!o)return[];if(r){var s=r(o);if(s)return s}if("PRED"===o.type)return[""+i.default(o.opts.predicate)];var f,c=a.default(o);if(l){var d=l.labelled,p=l.unlabelled,m=l.keyList;if(d){var v=d.reduce(function(t,n){var a=n.label,u=n.item;return t.concat([[_processLabel(a),", ",_fragmentParamAlts(e,u,r)]])},[]);f=interpose(v,[", ",t.NEW_LINE])}else if(p){var v=p.map(function(t){var n=t.item;return _fragmentParamAlts(e,n,r)});f=interpose(v,[", ",t.NEW_LINE])}else if(m){var v=m;f=interpose(v,[", "])}else f=[]}else f=[];return[c,"("].concat(f.length>1?[t.INDENT_IN,t.NEW_LINE]:[0===f.length?"":" "]).concat(f).concat(f.length>1?[t.INDENT_OUT,t.NEW_LINE]:[0===f.length?"":" "]).concat([")"])}function interpose(e,t){return 0===e.length?e:e.reduce(function(n,r,a){return a<e.length-1&&!isSpecial(r)?n.concat([r]).concat(t):n.concat([r])},[])}function isSpecial(e){return e===t.NEW_LINE||e===t.INDENT_IN||e===t.INDENT_OUT}function _fragmentParamAlts(e,t,n){var r=l.default(t,{label:_processLabel,sExpression:function(t){return strFragments(e,t,n)},quotedParamsMap:function(t){return _fragmentParamsObj(e,t,n,!0)},unquotedParamsMap:function(t){return _fragmentParamsObj(e,t,n,!1)},optionsObj:function(e){return f.default(e)},recursive:function(e){var t=e.expression;return["<recursive>: ",a.default(t)]}},function(){throw"!s"});return r}function _processLabel(e){var t=e.str,n=e.quoted;return t?t:n?'"'+n.value+'"':void 0}function _fragmentParamsObj(e,n,r,a){var u=["{",t.INDENT_IN,t.NEW_LINE],o=[];for(var s in n)if(n.hasOwnProperty(s)){var i=[];i.push(a?'"'+s+'": ':"<"+s+">: ");var f=l.default(n[s],{keyList:function(e){return["[ "].concat(interpose(e.map(function(e){return'"'+e+'"'}),[", "])).concat(" ]")},singleParam:function(t){return _fragmentParamAlts(e,t,r)}},function(){throw"!e"});f&&(i.push(f),o.push(i))}return o=interpose(o,[", ",t.NEW_LINE]),u=u.concat(o).concat([t.INDENT_OUT,t.NEW_LINE,"}"])}function fragsToStr(e,n,r){var a=n,o=!1;return e.reduce(function(e,n){if(o&&(o=!1,e=e.concat(c.default(r*a," ").join(""))),u.default(n))return e.concat(n);if(Array.isArray(n))return e.concat(fragsToStr(n,a,r));if(n===t.NEW_LINE){if(r>0)return o=!0,e.concat("\n")}else if(n===t.INDENT_IN)a+=1;else{if(n!==t.INDENT_OUT)throw console.error(n),"!3";a-=1}return e},"")}Object.defineProperty(t,"__esModule",{value:!0});var r=n(27),a=n(63);t.humanReadable=a.default;var u=n(7),o=n(0),l=n(18),s=n(6),i=n(3),f=n(19),c=n(69);t.NEW_LINE=function(){},t.INDENT_IN=function(){},t.INDENT_OUT=function(){},t.interpose=interpose,t.isSpecial=isSpecial,t.fragsToStr=fragsToStr,t.default=describe},function(e,t,n){"use strict";function fclause(e){return new o(e)}var r=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function __(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(__.prototype=n.prototype,new __)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),u=n(17),o=function(e){function FClause(t){var n=this;t.args,t.ret,t.fn;return n=e.call(this,{type:"FCLAUSE",exprs:[],opts:t,conformFn:null,generateFn:null})||this,n.instrumentConformed=function(e){return u.default(this,e,{conform:!0,instrument:!0})},n.instrument=function(e){return u.default(this,e,{conform:!1,instrument:!0})},n}return r(FClause,e),FClause}(a.default);t.default=fclause},function(e,t,n){"use strict";var r=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function __(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(__.prototype=n.prototype,new __)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),u=function(e){function ClauseRef(t){var n=t.ref,r=t.getFn,a=t.conformFn,u=e.call(this,{type:"CLAUSE_REF",exprs:[],opts:{},conformFn:a,generateFn:null})||this;return u.type="CLAUSE_REF",u.get=r,u.conform=a,u.ref=n,u}return r(ClauseRef,e),ClauseRef}(a.default);t.default=u},function(e,t,n){"use strict";var r=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function __(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(__.prototype=n.prototype,new __)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),u=function(e){function DelayedClause(t){var n=t.getFn,r=e.call(this,{type:"DELAYED",conformFn:function(e){var t=this.get();return t.conform(e)},exprs:[],opts:{},generateFn:null})||this;return r.get=n,r}return r(DelayedClause,e),DelayedClause}(a.default);t.default=u},function(e,t,n){"use strict";function equals(e){return function(t){return t===e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=equals},function(e,t,n){"use strict";function isBool(e){return"boolean"==typeof e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=isBool},function(e,t,n){"use strict";function isInt(e){return"number"==typeof e&&(Math.floor(e)===e&&e!==1/0)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=isInt},function(e,t,n){"use strict";function isNum(e){return"number"==typeof e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=isNum},function(e,t,n){"use strict";function isPlainObject(e){if(r.default(e)){if("function"==typeof Object.getPrototypeOf){var t=Object.getPrototypeOf(e);return t===Object.prototype||null===t}return"[object Object]"==Object.prototype.toString.call(e)}return!1}Object.defineProperty(t,"__esModule",{value:!0});var r=n(23);t.default=isPlainObject},function(e,t,n){"use strict";function oneOf(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n;if(1===e.length&&Array.isArray(e[0]))n=e[0];else{if(!(e.length>0))throw new Error("Items list is required.");n=Array.prototype.slice.call(e)}var r;return r=function(){var e=function(e){return n.indexOf(e)>=0};return e.__predToString=function(){return Array.from("oneOf(").concat([n.map(JSON.stringify).join(", ")]).concat(")")},e}()}Object.defineProperty(t,"__esModule",{value:!0}),t.default=oneOf},function(e,t,n){"use strict";function delayed(e){return new r.default({getFn:e})}Object.defineProperty(t,"__esModule",{value:!0});var r=n(32);t.default=delayed;
},function(e,t,n){"use strict";function identity(e){return e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=identity},function(e,t,n){"use strict";function isClauseName(e){return r.default(e)}Object.defineProperty(t,"__esModule",{value:!0});var r=n(7);t.default=isClauseName},function(e,t,n){"use strict";function resolve(e,t){var n=_findFirst(r,function(e){var n=e[0],r=e[1];if(n===t)return r});return n||(n=_createResolveMap(t),r.push([t,n])),_resolveWithMap(n,e)}function getDefList(e){var t=_createResolveMap(e),n={};return t.forEach(function(e){var t=e[0];n[t]||(n[t]=[]),n[t].push(e)}),n}function _createResolveMap(e){var t=[],n=a.NamespaceObjClause.conform(e);return _walk(null,null,n,t),t}function _walk(e,t,n,r){var a,u=e?e+"."+t:t;for(var o in n)if(n.hasOwnProperty(o))switch(o){case"subNamespaces":a=n[o];for(var l in a)a.hasOwnProperty(l)&&_walk(u,l,a[l],r);break;case".expr":r.push([""+(e?e:""),""+t,n[".expr"]])}}function _resolveWithMap(e,t){var n=_findFirst(e,function(e){var n=e[0],r=e[1],a=e[2];if(a===t||_tryStripPredClause(a)===_tryStripPredClause(t))return n+"/"+r});return n}function _tryStripPredClause(e){return"PRED"===e.type?e.opts.predicate:e}function _findFirst(e,t){for(var n=0;n<e.length;n++){var r=t(e[n]);if(r)return r}return null}Object.defineProperty(t,"__esModule",{value:!0});var r=[],a=n(26);t.default=resolve,t.getDefList=getDefList},function(e,t,n){"use strict";function __export(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0});var r=n(44);t.VERSION=r.default;var a=n(2);t.Problem=a.default;var u=n(1);t.Clause=u.default;var o=n(20);t.resolve=o.resolve,__export(n(20));var l=n(8);__export(n(8));var s=n(10);__export(n(10));var i=n(12);__export(n(12));var f={Problem:a.default,Clause:u.default},c=Object.assign(o.default,{resolve:o.resolve},l.default,s,f,i);c.VERSION=r.default,t.default=c},function(e,t,n){"use strict";e.exports="0.1.1"},function(e,t,n){"use strict";function wallOp(e){var t=a.default(e),n=new r.default({type:"WALL",exprs:[t],opts:{enclosedClause:t},conformFn:null,generateFn:null});return n.conform=function(e){return l.default(n,e,{conform:!0})},n}Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),a=n(9),u=n(5),o=n(30),l=n(17);t.WallFnClause=o.default({args:u.cat(u.ExprClause),ret:u.ExprClause});var s=t.WallFnClause.instrument(wallOp);t.default=s},function(e,t,n){"use strict";function any(){return new r.default({type:u,exprs:[],opts:{},conformFn:a.default,generateFn:null})}Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),a=n(40),u="ANY";t.default=any},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={CAT:"CAT",OR:"OR",Z_OR_M:"Z_OR_M",Z_OR_O:"Z_OR_O",O_OR_M:"O_OR_M",PRED:"PRED",COLL_OF:"COLL_OF"}},function(e,t,n){"use strict";function maybe(e){return r.or(a.default,u.default,e)}Object.defineProperty(t,"__esModule",{value:!0});var r=n(5),a=n(22),u=n(14);t.default=maybe},function(e,t,n){"use strict";function evalClause(e){e=a.default(e);var t;if(null===e.type)throw"Clause has no type: "+e;t=e.type in l?l[e.type]:l.PRED;var n=t(e);return n}function wrapRoot(e){return new r.default({type:"ROOT",exprs:[e],conformFn:null,generateFn:null,opts:{}})}function compile(e){var t,n=wrapRoot(e),r=evalClause(n),a=o(r),u=a.length,l={};return a.forEach(function(e){0===e.transitions.length&&(t=e.index);var n={};e.transitions.forEach(function(e){n[e.target.index]=e.clause}),l[e.index.toString()]=n}),{initialState:0,numStates:u,finalState:t,transitions:l,expression:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),a=n(28),u=n(50),o=function(e){for(var t=0,n=[e.head],r=[];n.length>0;){var a=n.pop();null===a.index&&(a.index=t,t++,a.transitions.forEach(function(e){n.push(e.target)}),r.push(a))}return r},l={},s=function(e){return function(t){var n=evalClause(t.exprs[0]);return e(n)}},i=function(e){return function(t){var n=t.exprs.map(function(e){var t=evalClause(e.expr);return t.name=e.name,t});return e(n)}};["ROOT","Z_OR_M","O_OR_M","Z_OR_O"].forEach(function(e){l[e]=s(u.default[e])}),["OR","CAT"].forEach(function(e){l[e]=i(u.default[e])}),l.PRED=function(e){return u.default.PRED(e)},t.default=compile},function(e,t,n){"use strict";function fragmentState(e,t){return{transitions:null===e?[]:e,index:t||null}}function fragmentTransition(e,t){return{clause:e,target:t}}function fragment(e,t){return{head:e,tails:t}}function namedFragment(e,t,n){var r=fragment(t,n);return r.name=e,r}function patch(e,t){e.forEach(function(e){e.target=t})}function epsilonState(){return{isEpsilon:!0}}function namedEpsilonState(e,t,n,r){var a=epsilonState();return a.name=t,a.op=n,a.group=r,a.dir=e,a}function frontWithState(e,t){var n=fragmentTransition(e,t.head),r=fragmentState([n]),a=fragment(r,t.tails);return a}function rearWithState(e,t){var n=fragmentTransition(e,null),r=fragmentState([n],null);patch(t.tails,r);var a=fragment(t.head,[n]);return a}Object.defineProperty(t,"__esModule",{value:!0});var r={};r.PRED=function(e){var t=fragmentTransition(e,null),n=fragmentState([t],null),r=[t],a=fragment(n,r);return a},r.OR=function(e){e=e.map(function(e){var t=namedEpsilonState("out",e.name,"OR"),n=fragmentTransition(t,null),r=fragmentState([n]);patch(e.tails,r);var a=fragmentTransition(namedEpsilonState("in",e.name,"OR"),e.head),u=fragmentState([a]),o=namedFragment(e.name,u,[n]);return o});var t=function(e,t){var n=e.head.transitions.concat(t.head.transitions),r=fragmentState(n),a=e.tails.concat(t.tails),u=namedFragment(e.name,r,a);return u},n=e.reduce(t);return n=frontWithState(namedEpsilonState("enter",null,"OR","para_in"),n),n=rearWithState(namedEpsilonState("exit",null,"OR","para_out"),n)},r.CAT=function(e){var t=function(e,t){patch(e.tails,t.head);var n=e.head,r=t.tails,a=fragment(n,r);return a};e=e.map(function(e){var t=fragmentTransition(namedEpsilonState("maybe_out",e.name,"CAT"),null),n=fragmentState([t]);patch(e.tails,n);var r=e.head.transitions.map(function(t){var n=fragmentState([t]),r=fragmentTransition(namedEpsilonState("maybe_in",e.name,"CAT"),n);return r}),a=fragmentState(r),u=namedFragment(e.name,a,[t]);return u});var n;if(e.length>0)n=e.reduce(t);else{var r=epsilonState(),a=fragmentTransition(r,null),u=fragmentState([a]);n=fragment(u,[a])}return n=frontWithState(namedEpsilonState("maybe_enter",null,"CAT","in"),n),n=rearWithState(namedEpsilonState("maybe_exit",null,"CAT","out"),n)},r.Z_OR_M=function(e){var t="Z_OR_M",n=fragmentTransition(namedEpsilonState("loop",null,t),e.head),r=fragmentTransition(epsilonState(),null),a=fragmentState([n,r]);patch(e.tails,a);var u=fragment(a,[r]),o=u.head.transitions.map(function(e){var t=fragmentState([e]),n=fragmentTransition(epsilonState(),t);return n}),l=fragmentState(o);return u=fragment(l,u.tails),u=frontWithState(namedEpsilonState("maybe_enter",null,t,"in"),u),u=rearWithState(namedEpsilonState("maybe_exit",null,t,"out"),u)},r.O_OR_M=function(e){var t="O_OR_M",n=fragmentTransition(namedEpsilonState("loop",null,t),e.head),r=fragmentTransition(epsilonState(),null),a=fragmentState([n,r]);patch(e.tails,a);var u=fragment(e.head,[r]);return u=frontWithState(namedEpsilonState("maybe_enter",null,t,"in"),u),u=rearWithState(namedEpsilonState("maybe_exit",null,t,"out"),u)},r.Z_OR_O=function(e){var t="Z_OR_O",n=fragmentTransition(namedEpsilonState("loop",null,t),e.head),r=fragmentTransition(epsilonState(),null),a=fragmentState([n,r]),u=e.tails.concat([r]),o=fragment(a,u);return o=frontWithState(namedEpsilonState("maybe_single_enter",null,t,"in"),o),o=rearWithState(namedEpsilonState("maybe_single_exit",null,t,"out"),o)},r.ROOT=function(e){var t=fragmentState(null,null);return patch(e.tails,t),fragment(e.head,[])},t.default=r},function(e,t,n){"use strict";function Value(e){this.value=e}function Piece(e){this.fragment=e}function GroupedPiece(e){this.fragment=e}function NamedPiece(e,t){this.fragment=t,this.name=e}function GroupedAltPiece(e){this.fragment=e}function NamedAltPiece(e,t){this.fragment=t,this.name=e}function Nothing(){}function Empty(){}function MaybeEnter(){}function GroupName(e){this.name=e}function getMatch(e,t,n){var r,a=n.conform,u=e.inputType,o=[];if(e.forEach(function(e){if(e.move)switch(e.move.dir){case"maybe_enter":o.push(new MaybeEnter);break;case"maybe_exit":for(var r=void 0,l=new Empty;!((r=o.pop())instanceof MaybeEnter);)l=_foldLeft(u,a,l,r);o.push(l);break;case"maybe_single_enter":o.push(new MaybeEnter);break;case"maybe_single_exit":var s=o.pop(),l=void 0;s instanceof MaybeEnter?l=new Nothing:(l=s,o.pop()),o.push(l);break;case"enter":break;case"exit":var r=o.pop(),l=void 0;if(a&&r instanceof NamedAltPiece){var i=void 0;r.fragment instanceof Empty?i={}:(d={},d[r.name]=r.fragment,i=d),l=new GroupedAltPiece(i)}else l=r;o.push(l);break;case"maybe_in":a&&e.move.name&&o.push(new GroupName(e.move.name));break;case"loop":break;case"maybe_out":if(a&&e.move.name){var r=o.pop(),f=o.pop();o.push(_giveName(f,r))}break;case"in":a&&e.move.name&&o.push(new GroupName(e.move.name));break;case"out":if(a&&e.move.name){var r=o.pop(),f=o.pop();o.push(_giveAltName(f,r))}break;case"clause":var c=t(e.clause,e.guide,n);o.push(new Value(c));break;default:throw console.error(e),"FUUU"}var d}),1!==o.length)throw console.error("valStack",o),"!";r=o.pop();var l;return l=r instanceof Piece?r.fragment:r instanceof GroupedPiece?r.fragment:r instanceof GroupedAltPiece?r.fragment:r instanceof Value?r.value:r instanceof Empty?_coerceToProperType(u,[]):r instanceof Nothing?null:r}function _giveName(e,t){if(t instanceof Nothing)return new NamedPiece(e.name,new Empty);if(t instanceof GroupedPiece)return new NamedPiece(e.name,t.fragment);if(t instanceof Piece||t instanceof GroupedAltPiece)return new NamedPiece(e.name,t.fragment);if(t instanceof Value)return new NamedPiece(e.name,t.value);if(t instanceof Empty)return new NamedPiece(e.name,new Empty);throw console.error(t),"c!!!"}function _giveAltName(e,t){if(t instanceof Nothing)return new NamedAltPiece(e.name,new Empty);if(t instanceof GroupedAltPiece)return new NamedAltPiece(e.name,t.fragment);if(t instanceof Piece)return new NamedAltPiece(e.name,t.fragment);if(t instanceof GroupedPiece)return new NamedAltPiece(e.name,t.fragment);if(t instanceof Value)return new NamedAltPiece(e.name,t.value);if(t instanceof Empty)return new NamedAltPiece(e.name,new Empty);throw console.error(t),"c!!!alt"}function _foldLeft(e,t,n,r){if(t&&r instanceof NamedPiece){var a=void 0;if(n instanceof Nothing)a={};else if(n)if(n instanceof Empty)a={};else if(n instanceof GroupedPiece)a=n.fragment;else if(n instanceof Piece)a=n.fragment;else{if(!(n instanceof GroupedAltPiece))throw console.error(n,r),"!!acc_fl_np";a=n.fragment}else a={};var u=void 0;r.fragment instanceof Empty?u={}:(f={},f[r.name]=r.fragment,u=f);var o=new GroupedPiece(Object.assign({},u,a));return o}var l=void 0,s=void 0;if(n instanceof Nothing)s=[];else if(n)if(n instanceof Piece)s=n.fragment;else if(n instanceof GroupedPiece)s=[n.fragment];else{if(!(n instanceof Empty))throw console.error(n),"!!acc_fl";s=[]}else s=[];if(r instanceof Value)l=[r.value];else if(r instanceof Piece)l=r.fragment;else if(r instanceof GroupedPiece)l=[r.fragment];else if(r instanceof GroupedAltPiece)l=[r.fragment];else if(r instanceof Nothing)l=[];else{if(!(r instanceof Empty))throw console.error(r),"cc!!";l=[]}var i=new Piece(_coerceToProperType(e,l.concat(s)));return i;var f}function _coerceToProperType(e,t){return"string"===e&&Array.isArray(t)?t.join(""):t}Object.defineProperty(t,"__esModule",{value:!0}),t.default=getMatch},function(e,t,n){"use strict";function simulate(e,t,n,a){for(var u={matched:!1,chain:null},o="undefined"==typeof t?"undefined":r(t),l={state:0,offset:0,input:[t],groupCount:0,arrayed:!1},s=[l];s.length>0;){var i=s.shift(),f=i.offset,c=i.input;if(i.state===e.finalState&&f===c.length)return u.matched=!0,u.chain=_getChain(e,i,o),u;for(var d in e.transitions[i.state]){var p=parseInt(d),m=_getNextMove(e,p,i,n,a);if(m)if(m.isProblem){var v=m.name,_=m.problem,g=m.position;u.lastProblem={name:v,problem:_,position:g}}else s.push(m)}}return u}function _getNextMove(e,t,n,r,o){var l=n.input,s=n.offset,i=n.groupCount,f=n.arrayed,c=l[s],d=e.transitions[n.state][t];"in"===d.group?(0===i&&(Array.isArray(l[0])||u.default(l[0]))&&(l=l[0],s=0,f=!0),i+=1):"out"===d.group&&(i-=1,0===i&&(f&&(s=s===l.length?1:0,l=[l]),f=!1));var p,m;p=d.isEpsilon?s:s+1;var v,_,g=d.name||n.move&&n.move.name;if(p<=l.length){if(d.isEpsilon)return m=d.dir?{dir:d.dir,name:d.name,op:d.op,group:d.group}:null,_={input:l,groupCount:i,arrayed:f,state:t,offset:p,move:m,clause:d,prev:n,isEpsilon:!0};if(v=r(d,c,o),a.default(v))return{isProblem:!0,problem:v,name:g,position:s};if(s<l.length)return m={dir:"clause"},_={input:l,groupCount:i,arrayed:f,state:t,offset:p,move:m,prev:n,isEpsilon:!1,clause:d,guide:v}}}function _getChain(e,t,n){for(var r,a=[],u=t;u;){if(!r||u.state!==r.state&&u.move){var o={isEpsilon:u.isEpsilon,move:u.move,state:u.state};u.isEpsilon||(o.guide=u.guide,o.clause=u.clause),a.unshift(o)}r=u,u=u.prev}return a.inputType=n,a}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),u=n(7);t.default=simulate},function(e,t,n){"use strict";function nullable(e){return r.or(a.default,e)}Object.defineProperty(t,"__esModule",{value:!0});var r=n(5),a=n(22);t.default=nullable},function(e,t,n){"use strict";function undefinable(e){return r.or(a.default,e)}Object.defineProperty(t,"__esModule",{value:!0});var r=n(5),a=n(14);t.default=undefinable},function(e,t,n){"use strict";function get(e,t,n){if("number"==typeof t&&(t=[t]),!t||0===t.length)return e;if(null==e)return n;if("string"==typeof t)return get(e,t.split("."),n);var r=getKey(t[0]),a=e[r];return void 0===a?n:1===t.length?a:get(e[r],t.slice(1),n)}function set(e,t,n){if("number"==typeof t&&(t=[t]),!t||0===t.length)return e;if("string"==typeof t)return set(e,t.split(".").map(getKey),n);var r=t[0],a=e[r];return 1===t.length?(e[r]=n,a):(void 0===a&&("number"==typeof t[1]?e[r]=[]:e[r]={}),set(e[r],t.slice(1),n))}function getKey(e){var t=parseInt(e);return t.toString()===e?t:e}Object.defineProperty(t,"__esModule",{value:!0}),t.get=get,t.set=set},function(e,t,n){"use strict";function isDate(e){return e&&e instanceof Date&&!isNaN(e.valueOf())}Object.defineProperty(t,"__esModule",{value:!0}),t.default=isDate},function(e,t,n){"use strict";function isNatInt(e){return r.default(e)&&e>=0}Object.defineProperty(t,"__esModule",{value:!0});var r=n(35);t.default=isNatInt},function(e,t,n){"use strict";function isUuid(e){return!!/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=isUuid},function(e,t,n){"use strict";function not(e){var t=r.default(e),n=function(t){return!e(t)};return t?a.default("not_"+t,n):n}Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),a=n(16);t.default=not},function(e,t,n){"use strict";function notEmpty(e){return!!e&&0!==e.length}Object.defineProperty(t,"__esModule",{value:!0}),t.default=notEmpty},function(e,t,n){"use strict";function betterThrow(e){throw e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=betterThrow},function(e,t,n){"use strict";function enforce(e,t){var n=a.default(e,t);if(r.default(n))throw n}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),a=n(24);t.default=enforce},function(e,t,n){"use strict";function humanReadable(e){return r.default(e)?e:e.type?a[e.type]?a[e.type]:e.type.toLowerCase():e.toString()}Object.defineProperty(t,"__esModule",{value:!0});var r=n(7),a={Z_OR_M:"zeroOrMore",O_OR_M:"oneOrMore",Z_OR_O:"zeroOrOne",COLL_OF:"collOf",MAP_OF:"mapOf"};t.default=humanReadable},function(e,t,n){"use strict";function isExpr(e){return r.default(e)||a.default(e)||u.default(e)||o.default(e)}Object.defineProperty(t,"__esModule",{value:!0});var r=n(11),a=n(4),u=n(15),o=n(25);t.default=isExpr},function(e,t,n){"use strict";function isFclause(e){return r.default(e)&&"FCLAUSE"===e.type}Object.defineProperty(t,"__esModule",{value:!0});var r=n(4);t.default=isFclause},function(e,t,n){"use strict";function isNamespacePath(e){return r.default(e)&&/^\/?[a-zA-Z0-9\-_\.]*\/([a-zA-Z0-9\-_]+)$/.test(e)}Object.defineProperty(t,"__esModule",{value:!0});var r=n(7);t.default=isNamespacePath},function(e,t,n){"use strict";function isValid(e,t){if(e)return u.default(e)?!r.default(o.default(e,t)):!a.default(e)||e(t);throw new Error("Clause is required")}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),a=n(11),u=n(4),o=n(24);t.default=isValid},function(e,t,n){"use strict";function lazyDefine(e,t,n){var r=function(n){return Object.defineProperty(e,t,{value:n,enumerable:!0,writable:!0})};return Object.defineProperty(e,t,{configurable:!0,enumerable:!0,get:function(){var e=n();return r(e),e},set:function(e){r(e)}}),e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=lazyDefine},function(e,t,n){"use strict";function repeat(e,t){var n,r=[];for(n=0;n<e;n++)r.push(t);return r}Object.defineProperty(t,"__esModule",{value:!0}),t.default=repeat},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=[9,10,11,12,13,32,160,5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8232,8233,8239,8287,12288,65279];t.default=r.reduce(function(e,t){return e+String.fromCharCode(t)},"")},function(e,t,n){"use strict";function andWalker(e,t){function andTrailblaze(e,u){for(var o=e,l=[],s=[],i=0;i<n.length;i+=1){var f=0===i?e:l[i-1];if(o=t(n[i],f,u),a.default(o)){s.push(o);break}var c=t(n[i],o,Object.assign({},u,{phase:"reconstruct"}));l.push(c)}return 0===s.length?{conforms:l}:new r.default(e,n,s,"One or more expressions failed AND test")}function andReconstruct(e){var t=e.conforms;return t[n.length-1]}var n=e.opts.conformedExprs.map(u.default);return{trailblaze:andTrailblaze,reconstruct:andReconstruct}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),a=n(0),u=n(6);t.default=andWalker},function(e,t,n){"use strict";function anyWalker(){return{trailblaze:walkThroughAny,reconstruct:walkThroughAny}}function walkThroughAny(e){return e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=anyWalker},function(e,t,n){"use strict";function clauseRefWalker(e,t){function walkClauseRef(n,r){var a=e.get();if(a)return t(a,n,r)}return{trailblaze:walkClauseRef,reconstruct:walkClauseRef}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=clauseRefWalker},function(e,t,n){"use strict";function collOfWalker(e,t){function collOfTrailblaze(l,s){var i=[],f=[];if(Array.isArray(l)){if(o){var c=o.maxCount,d=o.minCount;if(u.default(c)&&l.length>c)return new r.default(l,e,f,"collOf: collection size "+l.length+" exceeds maxCount "+c+".");if(u.default(d)&&l.length<d)return new r.default(l,e,f,"collOf: collection size "+l.length+" is less than minCount "+d+".")}for(var p=0;p<l.length;p+=1){var m=t(n,l[p],s);if(a.default(m)){f.push(m);break}i.push(m)}return f.length>0?new r.default(l,e,f,"One or more elements failed collOf test"):i}return new r.default(l,e,[],"collOf expects an array")}function collOfReconstruct(e,r){for(var a=[],u=0;u<e.length;u+=1){var o=t(n,e[u],r);a.push(o)}return a}var n=e.exprs[0],o=e.opts;return{trailblaze:collOfTrailblaze,reconstruct:collOfReconstruct}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(2),a=n(0),u=n(36);t.default=collOfWalker},function(e,t,n){"use strict";function delayedClauseWalker(e,t){function walkDelayedClause(n,r){var a=e.get();if(a)return t(a,n,r)}return{trailblaze:walkDelayedClause,reconstruct:walkDelayedClause}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=delayedClauseWalker},function(e,t,n){"use strict";function fclauseWalker(e,t){function fclauseTrailblaze(e){return e}function fclauseReconstruct(e,t){if(!e)throw new Error("A function must be clauseified for instrumentation.");var n=t.conform,r=t.instrument;return n&&r?instrumentConformed(e,t):r?_instrument(e,t):void 0}function _instrument(e,t){var n=u.default(e),r=getInstrumentedFn(n,e),a=o.default(n,r,"__instrumented");return a}function instrumentConformed(e,t){var n=u.default(e),r=getArgConformedInstrumentedFn(n,e),a=o.default(n,r,"__conformed");return a}function getInstrumentedFn(e,n){return function(){var r,a=Array.prototype.slice.call(arguments),u=checkArgs(n,e,a),o=n.apply(this,u),l=checkRet(n,e,o),c=s?t(s,a,{conform:!0,instrument:!0}):a;return r=i?t(i,o,{conform:!0,instrument:!0}):o,checkFnRelation(e,n,f,c,r),l}}function checkFnRelation(t,n,r,u,o){if(r){var s=r.call(null,u,o);if(!s){var i=new a.default({args:u,ret:o},e,[],"Function "+t+" failed valiation on argument-return value relation");l.default(i)}}}function checkArgs(n,u,o){var i=u||"<anonymous>";if(!s)return o;var f=t(s,o,{phase:"trailblaze"});if(!r.default(f))return t(s,f,{phase:"reconstruct",conform:!1,instrument:!0});var c=new a.default(o,e,[f],"Arguments for function "+i+"() is not valid");l.default(c)}function checkRet(n,u,o){var s=u||"<anonymous>";if(!i)return o;var f=t(i,o,{phase:"trailblaze"});if(!r.default(f)){var c=t(i,f,{phase:"reconstruct",instrument:!0,conform:!1});return c}var d=new a.default(o,e,[f],"Return value for function "+s+"() is not valid");l.default(d)}function getArgConformedInstrumentedFn(e,n){var u=e||"<anonymous>";return function(){var o=Array.prototype.slice.call(arguments),c=t(s,o,{conform:!0,instrument:!0});if(r.default(c)){var d=new a.default(o,s,[c],"Arguments for function "+u+" is not valid");l.default(d)}var p=n.call(this,c);if(checkRet(n,e,p),f){var m;m=i?t(i,p,{conform:!0,instrument:!0}):p,checkFnRelation(e,n,f,c,m)}return p}}var n=e.opts,s=n.args,i=n.ret,f=n.fn;return{trailblaze:fclauseTrailblaze,reconstruct:fclauseReconstruct}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),a=n(2),u=n(3),o=n(16),l=n(61);t.default=fclauseWalker},function(e,t,n){"use strict";function mapOfWalker(e,t){function mapOfTrailblaze(n,r){var o={};for(var l in n)if(n.hasOwnProperty(l)){var f=t(s,l,r);if(a.default(f))return new u.default(n,e,(d={},d[l]=f,d),"mapOf: key "+l+" failed validation");var c=t(i,n[l],r);if(a.default(c))return new u.default(n,e,(p={},p[l]=c,p),"mapOf: value for key "+l+" failed validation");o[l]={expr:i,valGuide:c}}return o;var d,p}function mapOfReconstruct(e,n){var r={};for(var a in e){var u=e[a],o=u.expr,l=u.valGuide;r[a]=t(o,l,n)}return r}var n=e.opts,o=n.keyExpression,l=n.valExpression,s=o&&r.default(o),i=l&&r.default(l);return{trailblaze:mapOfTrailblaze,reconstruct:mapOfReconstruct}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(6),a=n(0),u=n(2);t.default=mapOfWalker},function(e,t,n){"use strict";function nfaWalker(e,t){function nfaTrailblaze(a,l){n||(n=u.default(e));var s=r.default(n,a,t,l),i=s.chain,f=s.matched,c=s.lastProblem;if(f===!0)return{chain:i};var d=void 0;if(c){var p=c.name,m=c.position,v=c.problem;_={},_[p?'"'+p+'"':"<At position "+m+">"]=v,d=_}else d=[];return new o.default(a,e,d,"Clause "+e.type+" did not match value");var _}function nfaReconstruct(e,n){var r=e.chain,u=a.default(r,t,n);return u}var n;return{trailblaze:nfaTrailblaze,reconstruct:nfaReconstruct}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(52),a=n(51),u=n(49),o=n(2);t.default=nfaWalker},function(e,t,n){"use strict";function predWalker(e){function predTraiblaze(t){var n=e.exprs[0];return n(t)?t:new a.default(t,e,[],"Predicate "+r.default(n)+"() returns false")}function predReconstruct(e){return e}return{trailblaze:predTraiblaze,reconstruct:predReconstruct}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),a=n(2);t.default=predWalker},function(e,t,n){"use strict";function shapeWalker(e,t){function shapeTrailblaze(s,i){function processFieldDefs_mut(e,n){e:for(var r in e)if(e.hasOwnProperty(r)){var a=e[r],u=getFieldGuide(s,r,a,t,i),o=u.noop,l=u.problem,f=u.singleMatch,c=u.groupMatch;if(l){d.push([r,l]);break e}if(f)p.singles.push(f);else if(c)c.matchedKeys.length>0&&p.groups.push(c);else if(!o)throw"!"}}if(["object","function"].indexOf("undefined"==typeof s?"undefined":r(s))<0)return new o.default(s,e,[],"Value is not an object");n||(n=_genKeyConformer(u,l,t,i));var f=n(s);if(a.default(f))return f;var c,d=[],p={val:s,groups:[],singles:[]};u&&(c=u.fieldDefs),c&&processFieldDefs_mut(c,!1);var m;if(l&&(m=l.fieldDefs),m&&processFieldDefs_mut(m,!0),d.length>0){for(var v={},_=[],g=0;g<d.length;g++){var y=d[g],h=y[0],b=y[1];_.push(h),v[h]=b}var O=new o.default(s,e,v,"At least one property failed validation: "+_.join(", "));return O}return p}function shapeReconstruct(e,n){var r,a=e.val,u=e.singles,o=e.groups,l={walkOpts:n},s=n.mutate;return r=s?a:Object.assign({},a),u.forEach(function(e){restoreField_mut(r,e,t,n)}),o.forEach(function(e){var a=e.name,u=e.matchedKeys;if(l){r[a]={};var o=[];u.forEach(function(e){restoreField_mut(r[a],e,t,n),o.push(e.key)}),_deleteKeys(r,o)}else u.forEach(function(e){restoreField_mut(r,e,t,n)})}),r}var n,u,l,s=e.opts.conformedArgs.shapeArgs,i=s.requiredFields,f=s.optionalFields;return i&&(u=i.req||i.required),f&&(l=f.opt||f.optional),{trailblaze:shapeTrailblaze,reconstruct:shapeReconstruct}}function restoreField_mut(e,t,n,r){var a=t.key,u=t.clause,o=t.guide;e[a]=n(u,o,r)}function _genKeyConformer(e,t,n,r){return function(t){if(e){var u,l=[],s=e.fieldDefs,i=e.keyList;if(s){u=[];for(var f in s)s.hasOwnProperty(f)&&u.push(f)}else{if(!i)throw"unsupported";u=[].concat(i)}for(var c=0;c<u.length;c++){var d=u[c];if(s&&s[d].keyValExprPair){var p=!1;e:for(var m in t)if(t.hasOwnProperty(m)){var v=_conformNamedOrExpr(m,s[d].keyValExprPair.keyExpression,n,r);if(!a.default(v)){p=!0;break e}}p||l.push(d)}else if(s&&s[d].valExpressionOnly)if(t.hasOwnProperty(d)){var _=_conformNamedOrExpr(t[d],s[d].valExpressionOnly,n,r);a.default(_)&&l.push(d)}else l.push(d);else{if(!i)throw"!";void 0===t[d]&&l.push(d)}}if(l.length>0)return new o.default(t,e,[],"req: keys required: "+l.join(", "))}return t}}function _deleteKeys(e,t){for(var n=0;n<t.length;n++)delete e[t[n]]}function getFieldGuide(e,t,n,r,o){var s=n.valExpressionOnly,i=n.keyValExprPair;if(i){var f=[],c=i.keyExpression,d=i.valExpression;e:for(var p in e)if(e.hasOwnProperty(p)){var m=_conformNamedOrExpr(p,c,r,o);if(!a.default(m)){if(e===e[p])continue e;var v=_conformNamedOrExpr(e[p],d,r,o);if(a.default(v))return{problem:v};f.push({key:p,clause:l.default(d),guide:v})}}return{groupMatch:{name:t,matchedKeys:f}}}if(s){var _=e[t];if(u.default(_)||e[t]===e)return{noop:!0};var g=_conformNamedOrExpr(_,s,r,o);return a.default(g)?{problem:g}:{singleMatch:{key:t,clause:l.default(s),guide:g}}}throw"!!"}function _conformNamedOrExpr(e,t,n,r){var a=l.default(t),u=n(a,e,r);return u}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),u=n(14),o=n(2),l=n(6);t.default=shapeWalker},function(e,t,n){"use strict";function wallWalker(e,t){function wallWalk(n,r){var a=e.exprs[0];return t(a,n,r)}return{trailblaze:wallWalk,reconstruct:wallWalk}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=wallWalker},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},,function(e,t,n){"use strict";function AltHeadNode(e,t,n){this.label=e,this.clause=t,this.enclosed=n}function _strFragments(e,t,n){var r=[];e&&(r=r.concat([e,": "]));var a=_handler(t),u=a.head,o=a.params;if(!u)return[];if(n){var l=n(u);if(l)return r.concat(l)}if("PRED"===u.type)return[""+i.default(u.opts.predicate)];d.humanReadable(u);if("FCLAUSE"===u.type){var s=o.unlabelled[0].item.unquotedParamsMap,f=s.args,c=(void 0===f?{}:f).singleParam,m=void 0===c?null:c,v=s.ret,_=(void 0===v?{}:v).singleParam,g=void 0===_?null:_;return[].concat(m?_fragmentParamAlts(null,m,n):[]).concat([" → "]).concat(g?_fragmentParamAlts(null,g,n):["any"])}if("CAT"===u.type){var y=o.labelled,h=o.unlabelled,b=[];if(y){var O=y.reduce(function(e,t){var r=t.label,a=t.item,u=_processLabel(r);return e.concat([[_fragmentParamAlts(u,a,n)]])},[]);b=d.interpose(O,[", ",d.NEW_LINE])}else if(h){var O=h.map(function(e){var t=e.item;return _fragmentParamAlts(null,t,n)});b=d.interpose(O,[", ",d.NEW_LINE])}return r.concat(["( "]).concat(b).concat([" )"])}if("OR"===u.type){var y=o.labelled,h=o.unlabelled,P=[];if(y){var O=y.reduce(function(e,t){var r=t.item;return e.concat([[_fragmentParamAlts(null,r,n)]])},[]);P=d.interpose(O,[" | ",d.NEW_LINE])}else if(h){var O=h.map(function(e){var t=e.item;return _fragmentParamAlts(null,t,n)});P=d.interpose(O,[" | ",d.NEW_LINE])}return r.concat(["{ "]).concat(P).concat([" }"])}if("Z_OR_M"===u.type){var C=o.unlabelled[0].item,E=_fragmentParamAlts(null,C,n);return["( "].concat(r).concat([E," )*"])}if("O_OR_M"===u.type){var C=o.unlabelled[0].item,E=_fragmentParamAlts(null,C,n);return["( "].concat(r).concat([E," )+"])}if("Z_OR_O"===u.type){var C=o.unlabelled[0].item,E=_fragmentParamAlts(null,C,n);return["( "].concat(r).concat([E," )?"])}if("COLL_OF"===u.type){var C=o.unlabelled[0].item,E=_fragmentParamAlts(null,C,n);return["[ "].concat(r).concat([E," ]*"])}if("ANY"===u.type)return r.concat(["any"]);if("SHAPE"===u.type){var x=(o.unlabelled[0].item.unquotedParamsMap,o.unlabelled[0].item.unquotedParamsMap),w=x.required,F=(void 0===w?{singleParam:{}}:w).singleParam.quotedParamsMap,M=void 0===F?null:F,N=x.optional,A=(void 0===N?{singleParam:{}}:N).singleParam.quotedParamsMap,S=void 0===A?null:A,j=[];if(M)for(var k in M){var R=p.default(M[k],{keyList:function(e){return["[ "].concat(d.interpose(e.map(function(e){return'"'+e+'"'}),[", "])).concat(" ]")},singleParam:function(e){return _fragmentParamAlts(null,e,n)}},function(){throw"!e"});R&&(j=j.concat([[k+"*: ",R]]))}if(S)for(var k in S){var R=p.default(S[k],{keyList:function(e){return["[ "].concat(d.interpose(e.map(function(e){return'"'+e+'"'}),[", "])).concat(" ]")},singleParam:function(e){return _fragmentParamAlts(null,e,n)}},function(){throw"!e"});R&&(j=j.concat([[k+"?: ",R]]))}var T=d.interpose(j,[", "]);return r.concat(["{ "]).concat(T).concat([" }"])}if("AND"===u.type)return _fragmentParamAlts(e,o.unlabelled[0].item,n);if("MAP_OF"===u.type){var L=o.unlabelled[0].item.unquotedParamsMap,D=L.key.singleParam,q=L.val.singleParam,j=[].concat(_fragmentParamAlts(null,D,n)).concat([", "]).concat(_fragmentParamAlts(null,q,n));return r.concat(["< "]).concat(j).concat([" >"])}throw console.error(u),"not supported"}function _processLabel(e){var t=e.str,n=e.quoted;return t?t:n?n.value:void 0}function _fragmentParamAlts(e,t,n){var r=p.default(t,{label:_processLabel,sExpression:function(t){return _strFragments(e,t,n)},quotedParamsMap:function(e){return _fragmentParamsObj(e,n)},unquotedParamsMap:function(e){return _fragmentParamsObj(e,n)},optionsObj:function(e){return f.default(e)},recursive:function(e){var t=e.expression;return["<recursive>: ",d.humanReadable(t)]}},function(e){throw console.error(e),"!s"});return r}function _fragmentParamsObj(e,t){var n=["< ",d.INDENT_IN,d.NEW_LINE],r=[],a=e.key,u=e.val,o=p.default(a,{keyList:function(e){return["[ "].concat(d.interpose(e.map(function(e){return'"'+e+'"'}),[", "])).concat(" ]")},singleParam:function(e){return _fragmentParamAlts(null,e,t)}},function(){throw"!e"}),l=p.default(u,{keyList:function(e){return["[ "].concat(d.interpose(e.map(function(e){return'"'+e+'"'}),[", "])).concat(" ]")},singleParam:function(e){return _fragmentParamAlts(null,e,t)}},function(){throw"!e"});return r.push([o]),r.push([l]),r=d.interpose(r,[", ",d.NEW_LINE]),n=n.concat(r).concat([d.INDENT_OUT,d.NEW_LINE," >"])}function _describeCase(e,t){var n=o.conform(v,e);if(l.default.isProblem(n))throw"!!";var r=_strFragments(null,n,t),a=d.fragsToStr(r,0,0);return a}function _handler(e){var t=e.head,n=e.params;return p.default(t,{expression:function(e){
return{head:s.default(e),params:n}},altNode:function(e){var t=e.enclosed;return p.default(t,{sExpression:_handler},function(){})}},function(){throw"3"})}function _expand(e,t){if(l.default.conform(v,e).sExpression){var n=e[0],a=e.slice(1);if(n===t){var u=_makeAlts(n,a);return{found:!0,cases:u}}for(var o=function(n){var r=_expand(a[n],t),u=r.found,o=r.cases;if(u)return{value:{found:u,cases:o.map(function(t){return _makeAltCase(t,e,n)})}}},s=0;s<a.length;s+=1){var i=o(s);if("object"===("undefined"==typeof i?"undefined":r(i)))return i.value}}if(e[0]instanceof AltHeadNode)for(var f=e[0],d=f.enclosed,p=f.label,m=f.clause,_=function(e){var n=_expand(d[e],t),r=n.found,a=n.cases;if(r)return{value:{found:r,cases:a.map(function(t){return[new AltHeadNode(p,m,_makeAltCase(t,d,e-1))]})}}},s=0;s<d.length;s+=1){var g=_(s);if("object"===("undefined"==typeof g?"undefined":r(g)))return g.value}if(e instanceof c.QuotedParamsMap||e instanceof c.UnquotedParamsMap){var y=function(n){if(e.hasOwnProperty(n)){var r=e[n],a=_expand(r,t),u=a.found,o=a.cases;if(u)return{value:{found:u,cases:o.map(function(t){return _makeAltCaseMap(t,e,n)})}}}};for(var h in e){var b=y(h);if("object"===("undefined"==typeof b?"undefined":r(b)))return b.value}}return{found:!1,cases:[e]}}function _makeAlts(e,t){return e.opts.named?e.exprs.map(function(n,r){var a=n.name;n.expr;return[new AltHeadNode(a,e,t[2*r+1])]}):e.exprs.map(function(n,r){return[new AltHeadNode(null,e,t[r])]})}function _makeAltCase(e,t,n){return t.slice(0,n+1).concat([e]).concat(t.slice(n+2))}function _makeAltCaseMap(e,t,n){var r;return t instanceof c.QuotedParamsMap?r=new c.QuotedParamsMap:t instanceof c.UnquotedParamsMap&&(r=new c.UnquotedParamsMap),Object.assign(r,t),r[n]=e,r}function _fold(e,t,n,r,a){var u=t.sExpression,o=t.quotedParamsMap,l=t.unquotedParamsMap,i=n;if(u){var f,c=u.head,d=u.params,p=void 0===d?{}:d,m=p.labelled,v=void 0===m?null:m,_=p.unlabelled,g=void 0===_?null:_,y=s.default(c);if(r&&(f=r(y)))return i;i=e(i,y);var h=v||g||[];i=h.reduce(function(t,n){var a=n.item;return"FCLAUSE"===y.type?_fold(e,a,t,r,!0):_fold(e,a,t,r)},i)}else if(o||l){var b=o||l;for(var O in b)if(b.hasOwnProperty(O)&&(!a||!l||"ret"!==O)){var P=b[O].singleParam;P&&(i=_fold(e,P,i,r,a))}}return i}function _findPivots(e,t){return _fold(function(e,t){return _isPivot(t)&&e.indexOf(t)<0?e.concat([t]):e},e,[],t)}function _isPivot(e){return"OR"===e.type}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(t,"__esModule",{value:!0});var a=n(8),u=n(12),o=n(10),l=n(43),s=n(6),i=n(3),f=n(19),c=n(27),d=n(29),p=n(18),m=c.genClauses(a.or("expression",a.ExprClause,"altNode",a.and(u.instanceOf(AltHeadNode),l.default.shape({required:{clause:_isPivot,enclosed:o.delayed(function(){return _})}})))),v=m[0],_=m[1],g=a.fclause({args:a.cat(a.ExprClause,a.zeroOrOne(u.isInt),a.zeroOrOne(a.maybe(u.isFn)))}).instrument(function(e,t,n){void 0===t&&(t=20);var r=c.default(e),a=o.conform(c.ParamItemClause,r),u=_findPivots(a,n),l=u.reduce(function(e,n){var r=e.reduce(function(e,r){if(e.length>t)return e;var a=_expand(r,n).cases;return e.concat(a)},[]);return r},[r]),s=l.map(function(e){return _describeCase(e,n)});return s});t.default=g},,,function(e,t,n){"use strict";function gen(e){var t=r.NamespaceObjClause.conform(e),n=_walk(e,null,null,t);return n}function genCot(e){var t=c.getDefList(e),n=Object.keys(t);return"<dl>\n    "+n.map(function(n){return"\n    <dt>\n      "+n+"\n    </dt>\n    <dd>\n      <ul>\n      "+t[n].map(function(t){var n=t[0],r=t[1],u=t[2];return"<li>\n            "+_clauseRefLink(n+"/"+r)(function(t){return _stylizeName(f.default(u),_getAlias(e,t)||_unanbiguousName(t),a.getMeta(t,e))})+"\n          </li>"}).join("")+"\n      </ul>\n    </dd>\n    "}).join("")+"\n  </dl>"}function _getAlias(e,t){var n=a.getMeta(t,e);return n&&n.name}function _walk(e,t,n,r){var a,u,o,l=t?t+"."+n:n,s="",i=[];for(var f in r)if(r.hasOwnProperty(f))switch(f){case"subNamespaces":o=r[f];for(var c in o)if(o.hasOwnProperty(c)){var d=_walk(e,l,c,o[c]);i.push(d)}break;case".nsComment":a="<p><i>"+r[f]+"</i></p>";break;case".expr":u=_exprMeta(e,n,r[".expr"],r[".meta"])}return u&&(s+=u),l&&(a||_hasExprs(o))&&(s+="<h3>"+l+"/</h3><hr />"),a&&(s+=a),i.length>0&&(s+=i.join("\n")),s}function _hasExprs(e){return!!e&&Object.keys(e).filter(function(t){return e[t][".expr"]}).length>0}function _exprMeta(e,t,n,r){if(!n)throw new Error("Expression "+t+" does not exist in the registry");var a;return a=genForExpression(e,t,n,r)}function _stylizeName(e,t,n){return"FCLAUSE"===e.type&&t[0]===t[0].toLowerCase()||n&&n.showAsFunction?t+"()":t}function _type(e){return l.default(e)?m[e.type]||e.type.toLowerCase():o.default(e)?"predicate":void 0}function genForExpression(e,t,n,r){var a,u=c.default(n,e);if(u&&!t)a=_genClauseRef(e,t,u,n,r);else if("CLAUSE_REF"===n.type)a=_genClauseRef(e,t,null,n,r);else{if("DELAYED"===n.type)return genForExpression(e,t,n.get(),r);a="FCLAUSE"===n.type?_genFclause(e,t,n,u,r):"OR"===n.type?_genOrClause(e,t,u,n,r):"CAT"===n.type?_genCatClause(e,t,u,n,r):o.default(n)||"PRED"===n.type?_genPredClause(e,t,n,r):o.default(n)||"ANY"===n.type?_genAnyClause():"AND"===n.type?_genAndClause(e,t,u,n,r):_genUnknownClause(e,t,u,n,r)}var l=r&&r.name||t,s=t&&u?"\n      <h6>"+_stylizeName(n,l)+'</h6>&nbsp;\n        <span class="tag tag-primary">\n          '+_type(n)+"\n        </span>\n      ":null;return"\n    "+(t&&u?'<a name="'+u+'"></a>':"")+"\n    "+_wrapCard({header:s,legend:u?'<span class="tag tag-info">[clause]</span>':_tagFor(n,e,u),borderlabel:_labelFor(n)})(a)}function _wrapCard(e){var t=e.header,n=e.legend,r=e.borderlabel;return t?function(e){return'\n        <div class="card">\n          <div class="card-header inline-headers">\n            '+t+"\n          </div>\n        "+e+"\n        </div>\n      "}:n?function(e){return'\n    <fieldset class="card card-outline-'+(r||"default")+'">\n    <legend class="clause-type">\n      '+n+"\n    </legend>\n    "+e+"\n    </fieldset>\n    "}:void 0}function escapeHtml(e){var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"};return e.replace(/[&<>"']/g,function(e){return t[e]})}function _tagFor(e,t,n){return'\n    <span\n      role="button"\n      data-toggle="popover"\n      data-trigger="focus hover"\n      data-html="true"\n      data-content="'+escapeHtml(_description(e,t,n))+'"\n      data-container="body"\n      data-animation="false"\n      data-delay="500"\n      class="tag tag-'+_labelFor(e)+'">\n      '+_typeFor(e)+"\n    </span>\n  "}function _rawTypeFor(e){var t,n=f.default(e);return t=o.default(n)?"pred":n.type.toLowerCase()}function _typeFor(e){var t=_rawTypeFor(e);switch(t){case"pred":return"[pred] satisfies predicate";case"fclause":return"[fclause] a function";case"z_or_m":return"[*] zero or more";case"o_or_m":return"[+] one or more";case"z_or_o":return"[?] optional";case"coll_of":return"[collOf] a collection of";case"cat":return"[cat] a sequence of";case"or":return"[or] either one of";default:return'<span class="tag tag-info">['+t+"]</span>"}}function _labelFor(e){var t=_rawTypeFor(e);switch(t){case"pred":return"primary";case"fclause":return"info";case"cat":case"or":return"info";default:return"info"}}function _genAnyClause(){return'\n    <div class="card-block">Any value.</div>\n  '}function _genClauseRef(e,t,n,r,a){var u=n||r.ref;return'\n    <div class="card-block">\n      A value of type\n      '+_clauseRefLink(u)(function(e){return e})+"\n    </div>\n  "}function _genAndClause(e,t,n,r,a){var u=(a&&a.example,r.opts.conformedExprs.map(function(t,n){return'\n        <fieldset class="list-group-item card-outline-'+_labelFor(r)+'">\n          <legend class="clause-type">\n            <span class="tag tag-default">Condition '+(n+1)+' </span>\n          </legend>\n          <div class="row">\n            <div class="col-md-12">\n              '+genForExpression(e,null,p.default(t),null)+"\n            </div>\n          </div>\n        </fieldset>\n    "})),o='\n    <div class="card-block">\n      <p class="card-title">\n        Should satisfy <em>all</em> of the following expression:\n      </p>\n    </div>\n    <div class="list-group list-group-flush list-for-cat">\n      '+u.join(" ")+"\n    </div>\n  ";return o}function _genCatClause(e,t,n,r,a){var u=(a&&a.example,r.exprs.map(function(t,n){var u=t.name,o=t.expr,l=a&&a[u]&&a[u].comment;return'\n        <fieldset class="list-group-item card card-outline-'+_labelFor(r)+'">\n          <legend class="clause-type">\n          '+(u?'\n            <span class="tag tag-default">Part '+(n+1)+'</span>\n            <span class="lead font-italic text-primary">\n              &ldquo;'+u+"&rdquo;</span>\n          ":'<span class="tag tag-default">Part '+(n+1)+"</span>")+'\n          </legend>\n          <div class="row">\n            <div class="col-md-12">\n              '+(l?"<span>"+l+"</span>":"")+'\n            </div>\n          </div>\n          <div class="row">\n            <div class="col-md-12">\n              '+genForExpression(e,null,o,a&&a[u])+"\n            </div>\n          </div>\n        </fieldset>\n    "})),o='\n    <div class="card-block">\n      <p class="card-title">\n        Should be <em>an ordered list</em> of the following:\n      </p>\n    </div>\n    <div class="list-group list-group-flush list-for-cat">\n      '+u.join(" ")+"\n    </div>\n  ";return o}function _clauseRefLink(e){return function(t){return'<a href="#'+e+'" data-path="'+e+'">'+t(e)+"</a>"}}function _description(e,t,n){return'\n    <pre class="clause-description"><code class="clause">'+decodeURIComponent(_encode(i.default(e,_refExprFn(t,n),2)))+"</code></pre>\n  "}function _encode(e){return e.split("<").join("&lt;").split(">").join("&gt;")}function _refExprFn(e,t){return function(n){var r=c.default(n,e);if(r&&r!==t){var a=_clauseRefLink(r)(_unanbiguousName);return a=encodeURIComponent(a),[a]}return null}}function _unanbiguousName(e){var t=e.substring(e.indexOf("/")+1);return t}function _genPredClause(e,t,n,r){var a=n.exprs?n.exprs[0]:n,u='\n    <div class="card-block">\n      '+_predSourcePopover("A value that satisfies ",a)+"\n    </div>\n  ";return u}function _predSourcePopover(e,t){var n=u.default(t);return"\n    <em>\n      "+e+'\n      <span\n        data-toggle="popover"\n        data-trigger="hover click"\n        data-html="true"\n        role="button"\n        data-placement="top"\n        data-content="<pre>'+t.toString()+'</pre>"\n        data-container="body"\n        data-animation="false"\n        data-delay="500">\n        '+n+"()\n      </span>\n    </em>\n  "}function _genUnknownClause(e,t,n,r,a){var u='\n    <div class="card-block">\n      '+r.exprs.map(function(t){var n=t.name,r=t.expr;return r?genForExpression(e,n,r,a&&a[n]):genForExpression(e,null,t,null)}).join("")+"\n    </div>\n  ";return u}function _genOrClause(e,t,n,r,a){a||(a={});var u=r.exprs.map(function(t,n){var u=t.name,o=t.expr,l=a[u]&&a[u].comment,i=a[u]&&a[u].examples;return s.isStr(i)&&(i=[i]),'\n        <fieldset class="list-group-item card-outline-'+_labelFor(r)+'">\n          <legend class="clause-type">\n            <span class="tag tag-default">\n                Option '+(n+1)+"\n            </span>\n            "+(u?'\n                <span class="lead font-italic text-primary">\n                  &ldquo;'+u+"&rdquo;\n                </span>\n            ":"")+'\n          </legend>\n          <div class="row">\n            <div class="col-md-12">\n            '+(l?"<div>"+l+"</div>":"")+"\n\n            "+(i?'\n              <h6>Examples: </h6>\n                <div class="code-examples">\n                  '+i.map(function(e){return"\n                    <pre><code>"+e.trim()+"</code></pre>\n                  "}).join("\n")+"\n                </div>\n            ":"")+'\n            </div>\n          </div>\n          <div class="row">\n            <div class="col-md-12">\n              '+genForExpression(e,null,o,a&&a[u])+"\n            </div>\n          </div>\n        </fieldset>\n    "}),o='\n    <div class="card-block">\n      <p class="card-title">\n      '+(t?"":"\n      ")+'\n        Should be <em>one of</em> the following:\n      </p>\n    </div>\n    <div class="list-group list-group-flush list-for-or">\n      '+u.join("")+"\n    </div>\n  ";return o}function _genFclause(e,t,n,r,a){void 0===a&&(a={});var o=[],l=a||{},i=l.comment,f=void 0===i?null:i,c=l.examples,p=void 0===c?null:c;s.isStr(p)&&(p=[p]);var m=n.opts,v=m.args,_=m.ret,g=m.fn;f&&o.push([null,f]),v&&o.push(["Syntax","<ul>\n        "+d.default(n,20,_refExprFn(e,r)).map(function(e){return"<li>"+decodeURIComponent(_encode(e))+"</li>"}).join("")+"\n      </ul>"]),p&&o.push(['Examples  <button class="btn btn-info btn-sm launch-code-examples" data-name="'+t+'">\n          Live Eval\n        </button>','\n      <div class="code-examples" data-name="'+t+'">\n        '+p.map(function(e){return"\n            <pre><code>"+e.trim()+"</code></pre>\n          "}).join("")+"\n      </div>\n    "]),t&&r&&o.push(["Clause Description",'\n    <blockquote class="blockquote">\n      <small>\n        <em class="text-muted">\n          '+_description(n,e,r)+"\n        </em>\n      </small>\n    </blockquote>\n  "]),v&&o.push(["Argument Clause Graph",_wrapWithCollapsible(t+"-args-graph",genForExpression(e,null,v,a&&a.args))]),_&&o.push(["Return Value Clause Graph",_wrapWithCollapsible(t+"-ret-graph",genForExpression(e,null,_,a&&a.ret))]),g&&o.push(["Argument-return value relation","<pre>"+u.default(g)+"</pre>"]);var y='\n    <dl class="card-block">\n    '+o.map(function(e){var t=e[0],n=e[1],r=t?"<dt>"+t+"</dt>":"",a="<dd>"+n+"</dd>";return""+r+a}).join("\n")+"\n    </dl>\n  ";return y}function _wrapWithCollapsible(e,t){return'<p>\n     <button class="btn btn-sm btn-info" type="button" data-toggle="collapse" data-target="#'+e+'" aria-expanded="false" aria-controls="collapseExample">\n      Show Graph »\n    </button>\n  </p>\n  <div class="collapse" id="'+e+'">\n    '+t+"\n  </div>\n"}Object.defineProperty(t,"__esModule",{value:!0});var r=n(26),a=n(20),u=n(3),o=n(11),l=n(4),s=n(12),i=n(29),f=n(28),c=n(42),d=n(84);t.syntax=d.default;var p=n(6);t.gen=gen,t.genCot=genCot;var m={FCLAUSE:"function",PRED:"predicate",CAT:"cat sequence"};t.genForExpression=genForExpression}])});