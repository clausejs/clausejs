!function(e,r){"object"==typeof exports&&"object"==typeof module?module.exports=r():"function"==typeof define&&define.amd?define([],r):"object"==typeof exports?exports.C=r():e.C=r()}(this,function(){return function(e){function __webpack_require__(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,__webpack_require__),n.l=!0,n.exports}var r={};return __webpack_require__.m=e,__webpack_require__.c=r,__webpack_require__.i=function(e){return e},__webpack_require__.d=function(e,r,t){__webpack_require__.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:t})},__webpack_require__.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return __webpack_require__.d(r,"a",r),r},__webpack_require__.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=44)}([function(e,r,t){"use strict";function isProblem(e){return e instanceof n}var n=t(2);e.exports=isProblem},function(e,r,t){"use strict";function Clause(e){var r=e.type,t=e.exprs,n=e.opts,a=(e.fragments,e.conformFn),o=e.generateFn;if(this.type=r,n&&(this.opts=n),a&&(this.conform=a),o&&(this.generate=o),!t)throw new Error("Expressions are required when constructing a clause.");this.exprs=t}e.exports=Clause},function(e,r,t){"use strict";function Problem(e,r,t,n){var a=this;if(this.isProblem=!0,4!==arguments.length)throw"Problem arg len err";this.val=e,this.name="Problem",this.failsPredicate=r,this.shortMessage=n,this.subproblems=t,s(this,"message",function(){return _constructMessage(a,0)}),this.toString=function(){return a.message}}function _constructMessage(e,r){var t=e.subproblems,n=e.val,o=e.shortMessage;if(Array.isArray(t)){var s;return 0===t.length?o+"; val: "+i(n,null,2):(s=t.map(function(e){return""+_open(r)+_constructMessage(e,r+1)+_close(r)}),o+", because\n"+_repeatStr(" ",2*r)+" "+s.join(", "))}if("object"===("undefined"==typeof t?"undefined":a(t))){s=[];for(var u in t)t.hasOwnProperty(u)&&s.push("-> "+u+": "+_open(r)+" "+_constructMessage(t[u],r+1)+_close(r));return o+", because\n"+_repeatStr(" ",2*r)+" "+s.join(", ")}}function _repeatStr(e,r){for(var t="",n=0;n<r;n+=1)t+=e;return t}function _open(e){return o[e]}function _close(e){return o[o.length-e-1]}var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a="function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?function(e){return"undefined"==typeof e?"undefined":n(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":"undefined"==typeof e?"undefined":n(e)},o="❰❮❬❨❪﹙₍₎﹚❫❩❭❯❱",i=t(20),s=t(69);e.exports=Problem},function(e,r,t){"use strict";function getFunctionName(e){return a(e)?e.__predToString?e.__predToString():n?n(e):e.name:null}var n,a=t(13);if("test"!==function(){}.name){var o=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,i=Function.prototype.toString,s=String.prototype.match,u=String.prototype.replace,c=t(71),f=new RegExp("^["+c+"]*(?:function|class)["+c+"]*\\*?["+c+"]+([\\w\\$]+)["+c+"]*","i");n=function(e){var r=s.call(u.call(i.call(e),o," "),f);return r&&"anonymous"!==r[1]?r[1]:""}}else"anonymous"===(new Function).name&&(n=function(e){return e.name&&"anonymous"!==e.name?e.name:""});e.exports=getFunctionName},function(e,r,t){"use strict";function toObject(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function shouldUseNative(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var r={},t=0;t<10;t++)r["_"+String.fromCharCode(t)]=t;var n=Object.getOwnPropertyNames(r).map(function(e){return r[e]});if("0123456789"!==n.join(""))return!1;var a={};return"abcdefghijklmnopqrst".split("").forEach(function(e){a[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},a)).join("")}catch(e){return!1}}var n=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;e.exports=shouldUseNative()?Object.assign:function(e,r){for(var t,i,s=toObject(e),u=1;u<arguments.length;u++){t=Object(arguments[u]);for(var c in t)a.call(t,c)&&(s[c]=t[c]);if(n){i=n(t);for(var f=0;f<i.length;f++)o.call(t,i[f])&&(s[i[f]]=t[i[f]])}}return s}},function(e,r,t){"use strict";var n=t(1),a=t(22),o=a(n);e.exports=o},function(e,r,t){"use strict";var n=t(9);e.exports=function(e){if(!e)throw console.error(e),"!";if(e.clause)return e.clause;if(e.pred)return n(e.pred);throw console.error("unsupported:",e),"Not implemented"}},function(e,r,t){"use strict";function isString(e){return null!==e&&void 0!==e&&e.constructor===String}e.exports=isString},function(e,r,t){"use strict";function _labelled(){var e=Array.prototype.slice.call(arguments);return{expressions:{withLabels:e.map(function(e){var r=e[0],t=e[1],n=e[2];return{name:r,expr:(a={},a[t]=n,a)};var a})}}}function _unlabelled(){var e=Array.prototype.slice.call(arguments);return{expressions:{withoutLabels:e.map(function(e){var r=e[0],t=e[1];return n={},n[r]=t,n;var n})}}}function andOp(e){var r=new a({type:"AND",exprs:[],fragments:e,opts:{conformedExprs:e}});return r.conform=function(e){return y(r,e,{conform:!0})},r}function noDupelicateLabels(e){var r=e.expressions.withLabels;if(r)for(var t=[],n=0;n<r.length;n+=1){var a=r[n].name;if(t.indexOf(a)>=0)throw new Error("Duplicate label detected: "+a);t.push(a)}return!0}function genMultiArgOp(e){return f(e,function(r){var t,o=r.expressions,i=o.withLabels,u=o.withoutLabels,c=r.options;if(i){t=i;var f=t.map(function(e){var r=e.expr,t=s(r);return n({},e,{expr:t,clause:void 0,pred:void 0,clauseRef:void 0,delayedClause:void 0})}),l=n({},c,{named:!0}),p=new a({type:e,exprs:f,opts:l});return p.conform=function(e){return y(p,e,{conform:!0})},p}if(u){t=u,f=t.map(function(e){var r;if(e.clause)return r=e.clause,n({},e,{expr:r,clause:void 0});if(e.pred)return r=d(e.pred),n({},e,{expr:r,pred:void 0});if(e.clauseRef)return r=e.clauseRef,n({},e,{expr:r,clauseRef:void 0});if(e.delayedClause)return r=e.delayedClause,n({},e,{expr:r,delayedClause:void 0});throw console.error(e),"!"});var l=n({},c,{named:!1});return p=new a({type:e,exprs:f,opts:l}),p.conform=function(e){return y(p,e,{conform:!0})},p}return p=new a({type:e,exprs:[],opts:{}}),p.conform=function(e){return y(p,e,{conform:!0})},p})}function genSingleArgOp(e){return f(e,function(r){var t,o=r.expr,i=r.opts;if(o.clause)t=o.clause;else if(o.pred)t=d(o.pred);else if(o.clauseRef)t=o.clauseRef;else{if(!o.delayedClause)throw console.error(o),"internal err";t=o.delayedClause}var s=d(t),u=new a({type:e,exprs:[s],opts:n({},i,{enclosedClause:s})});return u.conform=function(e){return y(u,e,{conform:!0})},u})}function isPropName(e){return h(e)}function mapOfOp(e){if(u(e))throw e;var r=e.keyExpression,t=e.valExpression,n=new a({type:U,exprs:[],opts:{keyExpression:r,valExpression:t}});return n.conform=function(e){return y(n,e,{conform:!0})},n}function shapeOp(e){if(u(e))throw e;var r=new a({type:z,exprs:[],fragments:[],opts:{conformedArgs:e}});return r.conform=function(e){return y(r,e,{conform:!0})},r}var n=t(4),a=t(1),o=t(5),i=t(10),s=t(6),u=t(0),c=t(42),f=t(16),l=t(15),p=t(26),m=t(48),d=t(9),v=t(21),y=t(17),g=t(24),h=t(7),_=t(39),b=t(38),x=d(o),O=d(c),w=genMultiArgOp(m.CAT),E=genMultiArgOp(m.OR),S=genSingleArgOp(m.Z_OR_M),P=genSingleArgOp(m.O_OR_M),C=genSingleArgOp(m.Z_OR_O),R=genSingleArgOp(m.COLL_OF),k=d(o),A=d(l),F=d(p),N=d(i),M=E(_labelled(["clause","clause",k],["pred","clause",N])),T=w(_labelled(["name","clause",O],["comment","clause",C({expr:{pred:h}})],["expr","clause",M])),j=w(_labelled(["expressions","clause",E(_labelled(["withLabels","clause",E(_unlabelled(["clause",S({expr:{clause:T}})],["clause",R({expr:{clause:T}})]))],["withoutLabels","clause",S({expr:{clause:M}})]))],["options","clause",C({expr:{pred:b}})])),D=andOp([{clause:j},{pred:noDupelicateLabels}]),L=v({args:P({expr:{clause:M}}),ret:o}),q={args:D,ret:x},W=function(e){return{args:w(_labelled(["expr","clause",M],["opts","clause",C({expr:e})])),ret:x}},z="SHAPE",U="MAP_OF",G=mapOfOp({keyExpression:{clause:d(h)},valExpression:{clause:E(_labelled(["valExpressionOnly","clause",M],["keyValExprPair","clause",w(_labelled(["keyExpression","clause",M],["valExpression","clause",M]))]))}}),I=S({expr:{pred:isPropName}}),V=E(_labelled(["keyList","clause",I],["fieldDefs","clause",G])),Z=shapeOp({shapeArgs:{optionalFields:{opt:{fieldDefs:{requiredFields:{keyValExprPair:{keyExpression:{pred:_("req","required")},valExpression:{clause:V}}},optionalFields:{keyValExprPair:{keyExpression:{pred:_("opt","optional")},valExpression:{clause:V}}}}}}}}),K=v({args:w(_labelled(["keyExpression","clause",M],["valExpression","clause",M])),ret:o}),Q=(shapeOp({shapeArgs:{optionalFields:{opt:{fieldDefs:{requiredFields:{keyValExprPair:{keyExpression:{pred:_("req","required")},valExpression:{clause:V}}},optionalFields:{keyValExprPair:{keyExpression:{pred:_("opt","optional")},valExpression:{clause:V}}}}}}}}),v({args:w(_labelled(["shapeArgs","clause",Z])),ret:o})),Y=Q.instrumentConformed(shapeOp),$=K.instrumentConformed(mapOfOp),B=v(W({pred:g})),H=B.instrumentConformed(R),J=v(q),X=v(q),ee=v(W({pred:g})),re=v(W({pred:g})),te=v(W({pred:g})),ne=L.instrumentConformed(andOp),ae={cat:J.instrumentConformed(w),or:X.instrumentConformed(E),zeroOrMore:ee.instrumentConformed(S),zeroOrOne:te.instrumentConformed(C),oneOrMore:re.instrumentConformed(P),ExprClause:M,ClauseClause:k,PredClause:N,DelayedClauseClause:F,ClauseRefClause:A,CatFnClause:J,AndFnClause:L,OrFnClause:X,ZeroOrMoreFnClause:ee,OneOrMoreFnClause:re,ZeroOrOneFnClause:te,CollOfClause:B,collOf:H,and:ne,shape:Y,keys:Y,mapOf:$,ShapeFnClause:Q,MapOfFnClause:K};ae.alt=ae.or,ae["*"]=ae.zeroOrMore,ae["+"]=ae.oneOrMore,ae["?"]=ae.zeroOrOne,e.exports=ae},function(e,r,t){"use strict";function coerceIntoClause(e){if(a(e)||o(e)||i(e))return e;if(n(e))return _wrap(e);throw console.error(e),new Error("'Expression must either be a Clause object or a predication function that returns true or false. Given value: "+f(e)+"'")}function _wrap(e){return new s({type:l,exprs:[e],opts:{predicate:e},conformFn:predConformer(e)})}function predConformer(e){return function(r){return e(r)?r:new u(r,e,[],"Predicate "+c(e)+" returns false")}}var n=t(10),a=t(5),o=t(15),i=t(26),s=t(1),u=t(2),c=t(3),f=t(20),l="PRED";e.exports=coerceIntoClause},function(e,r,t){"use strict";function isPred(e){return n(e)}var n=t(13);e.exports=isPred},function(e,r,t){"use strict";var n=t(4),a=t(8),o=t(8),i=o.shape,s=o.keys,u=o.mapOf,c=o.cat,f=o.fclause,l=t(54),p=t(55),m=t(49),d=t(46).wall,v=t(34),y=function(e){return c.apply(null,Array.prototype.slice.call(e).map(v))},g={any:t(47),fclause:t(21),wall:d,clause:d,nullable:l,undefinable:p,maybe:m,cstr:y},h=n({},a,{shape:i,keys:s,mapOf:u,fspec:f},g);e.exports=h},function(e,r,t){"use strict";var n=t(37),a=t(58),o=t(36),i=t(35),s=t(13),u=t(24),c=t(38),f=t(34),l=t(39),p=t(7),m=t(57),d=t(60),v=t(22),y=t(59),g=Array.isArray,h={isNull:t(23),isUndefined:t(14),notEmpty:t(61),isBool:i,isBoolean:i,isFn:s,isFunction:s,isNum:n,isNumber:n,isNatInt:a,isNaturalNumber:a,isInt:o,isInteger:o,isObj:u,isObject:u,isPlainObj:c,isPlainObject:c,isStr:p,isString:p,isArray:g,isArr:g,equal:f,equals:f,equalsTo:f,eq:f,oneOf:l,not:d,isDate:m,instanceOf:v,isUuid:y,isUUID:y};h.default=h,e.exports=h},function(e,r,t){"use strict";function isFunction(e){var r={};return(e||!1)&&["[object Function]","[object GeneratorFunction]"].indexOf(r.toString.call(e))>=0}e.exports=isFunction},function(e,r,t){"use strict";e.exports=function(e){return void 0===e}},function(e,r,t){"use strict";function isClauseRef(e){return e instanceof n}var n=t(32);e.exports=isClauseRef},function(e,r,t){"use strict";function getNamedFn(e,r,t){if(e){var n="return function "+e+(t||"")+"(){ return action.apply(this, arguments); };";return new Function("action",n)(r)}return r}e.exports=getNamedFn},function(e,r,t){"use strict";function walk(e,r,t){var a=t.phase,o=_getWalker(e);if(a){if(o[a])return o[a](r,t);throw"!"}var i=o.trailblaze(r,n({phase:"trailblaze"},t));return y(i)?i:o.reconstruct(i,n({phase:"reconstruct"},t))}function _getWalker(e){var r=v(e),t=g[r.type];if(!t)throw"unsupported type "+r.type;var n=t(r,walk);return n}var n=t(4),a=t(79),o=t(73),i=t(80),s=t(82),u=t(77),c=t(81),f=t(72),l=t(75),p=t(78),m=t(74),d=t(76),v=t(9),y=t(0),g={OR:a,CAT:a,COLL_OF:l,ANY:o,Z_OR_M:a,O_OR_M:a,Z_OR_O:a,PRED:i,WALL:s,SHAPE:c,AND:f,CLAUSE_REF:m,DELAYED:d,FCLAUSE:u,MAP_OF:p};e.exports=walk},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t(28),a=t(30);e.exports={conform:t(25),isValid:t(68),isNamespacePath:t(67),identity:t(41),isProblem:t(0),delayed:t(40),enforce:t(63),isClause:t(5),isFclause:t(66),isClauseRef:t(15),deref:t(29),isClauseName:t(42),describe:a.default,sExpression:n.default,match:t(19)}},function(e,r,t){"use strict";function match(e,r,t){for(var n in e)return e.hasOwnProperty(n)&&r.hasOwnProperty(n)?r[n](e[n]):t(e[n]);throw console.error(e),new Error("No cases present in the given object")}e.exports=match},function(e,r,t){"use strict";function stringifyWithFnName(e,r){var t=Array.prototype.slice.call(arguments);return t[1]=function(e,t){var o;if(n(t)){var i=a(t);o=i?i+"()":t.toString()}else o=t;return r?r(o):o},JSON.stringify.apply(this,t)}var n=t(13),a=t(3);e.exports=stringifyWithFnName},function(e,r,t){"use strict";function fclause(e){var r=(e.args,e.ret,e.fn,new n({type:"FCLAUSE",exprs:[],opts:e}));return r.instrumentConformed=function(e){return a(r,e,{conform:!0,instrument:!0})},r.instrument=function(e){return a(r,e,{conform:!1,instrument:!0})},r}var n=t(1),a=t(17);t(3);e.exports=fclause},function(e,r,t){"use strict";var n=t(3),a=t(16);e.exports=function(e){var r=n(e),t=function(r){return r instanceof e};return r&&(t=a("instanceOf_"+r,t)),t.__predToString=function(){return"instanceOf_"+(r||"anonymous_type")+"_"},t}},function(e,r,t){"use strict";function isNull(e){return null===e}e.exports=isNull},function(e,r,t){"use strict";function isObject(e){return"object"===("undefined"==typeof e?"undefined":a(e))&&null!==e}var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a="function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?function(e){return"undefined"==typeof e?"undefined":n(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":"undefined"==typeof e?"undefined":n(e)};e.exports=isObject},function(e,r,t){"use strict";function conform(e,r,t){if(e&&n(e)){var a=e.conform(r);return a}throw new Error("Expression needs to be of type Clause. expression: \n"+e+"\n offending value: "+r)}var n=t(5);e.exports=conform},function(e,r,t){"use strict";var n=t(33),a=t(22);e.exports=a(n)},function(e,r,t){"use strict";function isNamespaceFragment(e){return!!/^[^.@%\&\*#]+/.test(e)}Object.defineProperty(r,"__esModule",{value:!0});var n=t(11),a=t(18);r.isNamespacePath=a.isNamespacePath,r.isClauseRef=a.isClauseRef;var o=t(12),i=t(65),s=a.delayed(function(){return n.ExprClause}),u=n.cat("nsPath",a.isNamespacePath),c=n.fclause({args:u,ret:a.isClauseRef});r.GetNSFnClause=c;var f=n.cat("nsPath",a.isNamespacePath,"expression",s),l=n.fclause({args:f,ret:o.isBool});r.SetNSFnClause=l;var p=n.or("register",f,"retrieve",u),m=n.fclause({args:p,ret:n.or(o.isUndefined,a.isClauseRef)});r.NamespaceFnClause=m;var d=n.fclause({args:n.cat("source",n.or("namespacePath",a.isNamespacePath,"expression",n.ExprClause),"metaObj",o.isObj,"registry",n.zeroOrOne(o.isObj)),ret:o.isUndefined});r.SetMetaFnClause=d;var v=n.fclause({args:n.cat("source",n.or("namespacePath",a.isNamespacePath,"expression",n.ExprClause),"registry",n.zeroOrOne(o.isObj)),ret:n.maybe(o.isObj)});r.GetMetaFnClause=v;var y=n.fclause({args:n.cat("expression",n.ExprClause,"registry",n.zeroOrOne(o.isObj)),ret:a.isNamespacePath});r.ResolveFnClause=y;var g=n.shape({optional:{subNamespaces:[isNamespaceFragment,a.delayed(function(){return g})],".meta":o.isObj,".expr":i}});r.NamespaceObjClause=g},function(e,r,t){"use strict";function Recursive(e){this.isRecursive=!0,this.expression=e}function QuotedParamsMap(e){o(this,e)}function UnquotedParamsMap(e){o(this,e)}function Quoted(e){this.value=e}function genClauses(e){var r=p("sExpression",y(function(){return t}),"quotedParamsMap",y(function(){return a}),"unquotedParamsMap",y(function(){return o}),"optionsObj",x,"recursive",O(Recursive)),t=s(l("head",e,"params",p("labelled",c(l("label",w,"item",y(function(){return r}))),"unlabelled",c(l("item",y(function(){return r})))))),n=d(u,v(p("keyList",c(y(function(){return w})),"singleParam",y(function(){return r})))),a=f(O(QuotedParamsMap),y(function(){return n})),o=f(O(UnquotedParamsMap),y(function(){return n}));return[t,r]}function _fieldDefToFrags(e,r){var t=r.fieldDefs,n=r.keyList;if(t){var i=new QuotedParamsMap;for(var s in t)if(t.hasOwnProperty(s)){var u=g(t[s],{keyValExprPair:function(r){return _handleKeyValExprPair(e,r)},valExpressionOnly:function(r){return _createSExpr(e,a(r))}},function(){throw"!g"});o(i,(c={},c[s]=u,c))}return i}if(n)return n;throw"!w";var c}function _handleKeyValExprPair(e,r){var t=r.keyExpression,n=r.valExpression;return new UnquotedParamsMap({key:_createSExpr(e,a(t)),val:_createSExpr(e,a(n))})}function _params(e,r){var t=k[r.type];if(t){var n=t(e,r);return n}throw console.error(r),new Error("Unsupported clause type "+r.type+".")}function _createSExpr(e,r){if(_exists(e,r))return new Recursive(r);var t,n=h(r),a=e;if("DELAYED"===n.type||"CLAUSE_REF"===n.type)return t=n.get(),_createSExpr(e,t);t=n,a=_addToRepo(e,n);var o=_params(a,t);return[t].concat(o)}function _addToRepo(e,r){if(!_exists(e,r))return e.concat([r])}function _exists(e,r){return e.indexOf(r)>=0}function sExpression(e){var r=[];return _createSExpr(r,e)}Object.defineProperty(r,"__esModule",{value:!0});var n=t(3),a=t(6),o=t(4),i=t(11),s=i.wall,u=i.any,c=i.zeroOrMore,f=i.and,l=i.cat,p=i.or,m=i.ExprClause,d=i.mapOf,v=i.maybe,y=t(40),g=t(19),h=t(9),_=t(12),b=_.isStr,x=_.isPlainObj,O=_.instanceOf;r.Recursive=Recursive,r.QuotedParamsMap=QuotedParamsMap,r.UnquotedParamsMap=UnquotedParamsMap;var w=p("str",b,"quoted",O(Quoted));r.genClauses=genClauses;var E=genClauses(m),S=E[0],P=E[1];r.SExpressionClause=S,r.ParamItemClause=P;var C=function(e,r){var t=r.opts.enclosedClause;return[_createSExpr(e,t)]},R=function(e,r){var t=r.opts.named,n=r.exprs;if(0===n.length)return[];if(t){var a=n.reduce(function(r,t){var n=t.name,a=t.expr;return r.concat([new Quoted(n),_createSExpr(e,a)])},[]);return a}return n.reduce(function(r,t){var n=t.expr;return r.concat([_createSExpr(e,n)])},[])},k={PRED:function(){return[]},WALL:function(e,r){var t=r.opts.enclosedClause;return[_createSExpr(e,t)]},AND:function(e,r){var t=r.opts.conformedExprs;return t.map(a).map(function(r){return _createSExpr(e,r)})},CAT:R,OR:R,Z_OR_M:C,O_OR_M:C,Z_OR_O:C,COLL_OF:C,ANY:function(){return[]},MAP_OF:function(e,r){var t=r.opts;return _handleKeyValExprPair(e,t)},SHAPE:function(e,r){var t=r.opts.conformedArgs.shapeArgs,n=t.optionalFields,a=void 0===n?{}:n,i=a.opt,s=a.optional,u=t.requiredFields,c=void 0===u?{}:u,f=c.req,l=c.required;return o(new UnquotedParamsMap,f||l?{required:_fieldDefToFrags(e,f||l)}:{},i||s?{optional:_fieldDefToFrags(e,i||s)}:{})},FCLAUSE:function(e,r){var t=r.opts,a=t.args,i=t.ret,s=t.fn;return o(new UnquotedParamsMap,a?{args:_createSExpr(e,a)}:{},i?{ret:_createSExpr(e,i)}:{},s?{fn:[n(s)+"()"]}:{})}};r.default=sExpression},function(e,r,t){"use strict";e.exports=function(e){for(var r=e;r.get;)r=r.get();return r}},function(e,r,t){"use strict";function describe(e,r,t){var a=n.default(e),o=n.SExpressionClause.conform(a);if(i(o))throw console.error(o),new Error("The given expression is not a valid expression.");var s=_strFragments(o,r),u=0,c=fragsToStr(s,u,t);return c}function _strFragments(e,r){return strFragments(function(e){var r=e.head,t=e.params;return{head:u(r),params:t}},e,r)}function strFragments(e,r,t){var n=e(r),o=n.head,i=n.params;if(!o)return[];if(t){var s=t(o);if(s)return s}if("PRED"===o.type)return[""+c(o.opts.predicate)];var u,f=a(o);if(i){var l=i.labelled,v=i.unlabelled,y=i.keyList;if(l){var g=l.reduce(function(r,n){var a=n.label,o=n.item;return r.concat([[_processLabel(a),", ",_fragmentParamAlts(e,o,t)]])},[]);u=interpose(g,[", ",p])}else if(v){var g=v.map(function(r){var n=r.item;return _fragmentParamAlts(e,n,t)});u=interpose(g,[", ",p])}else if(y){var g=y;u=interpose(g,[", "])}else u=[]}else u=[];return[f,"("].concat(u.length>1?[m,p]:[0===u.length?"":" "]).concat(u).concat(u.length>1?[d,p]:[0===u.length?"":" "]).concat([")"])}function interpose(e,r){return 0===e.length?e:e.reduce(function(t,n,a){return a<e.length-1&&!isSpecial(n)?t.concat([n]).concat(r):t.concat([n])},[])}function isSpecial(e){return e===p||e===m||e===d}function _fragmentParamAlts(e,r,t){var n=s(r,{label:_processLabel,sExpression:function(r){return strFragments(e,r,t)},quotedParamsMap:function(r){return _fragmentParamsObj(e,r,t,!0)},unquotedParamsMap:function(r){return _fragmentParamsObj(e,r,t,!1)},optionsObj:function(e){return f(e)},recursive:function(e){var r=e.expression;return["<recursive>: ",a(r)]}},function(){throw"!s"});return n}function _processLabel(e){var r=e.str,t=e.quoted;return r?r:t?'"'+t.value+'"':void 0}function _fragmentParamsObj(e,r,t,n){var a=["{",m,p],o=[];for(var i in r)if(r.hasOwnProperty(i)){var u=[];u.push(n?'"'+i+'": ':"<"+i+">: ");var c=s(r[i],{keyList:function(e){return["[ "].concat(interpose(e.map(function(e){return'"'+e+'"'}),[", "])).concat(" ]")},singleParam:function(r){return _fragmentParamAlts(e,r,t)}},function(){throw"!e"});c&&(u.push(c),o.push(u))}return o=interpose(o,[", ",p]),a=a.concat(o).concat([d,p,"}"])}function fragsToStr(e,r,t){var n=r,a=!1;return e.reduce(function(e,r){if(a&&(a=!1,e=e.concat(l(t*n," ").join(""))),o(r))return e.concat(r);if(Array.isArray(r))return e.concat(fragsToStr(r,n,t));if(r===p){if(t>0)return a=!0,e.concat("\n")}else if(r===m)n+=1;else{if(r!==d)throw console.error(r),"!3";n-=1}return e},"")}Object.defineProperty(r,"__esModule",{value:!0});var n=t(28),a=t(64);r.humanReadable=a;var o=t(7),i=t(0),s=t(19),u=t(6),c=t(3),f=t(20),l=t(70),p=function(){};r.NEW_LINE=p;var m=function(){};r.INDENT_IN=m;var d=function(){};r.INDENT_OUT=d,r.interpose=interpose,r.isSpecial=isSpecial,r.fragsToStr=fragsToStr,r.default=describe},function(e,r,t){"use strict";(function(e){function _getUnchecked(e){function getFn(r){var t=n;t=r?r+e:e;var o=g.get(n,_slashToDot(t));return o?a(o[".expr"],o[".meta"]):void 0}var r=new o({ref:e,getFn:getFn,conformFn:null});return r.conform=function(e){var r=getFn();return d(r,e,{conform:!0})},r}function _slashToDot(e){return e.replace(/^(.+)(\/)(.+)$/,"$1.$3").replace(/^\//,"")}function getNamespacePath(e){var r,t=e.nsPath,n=C(t);return r=n}function setNamespacePath(e){var r=e.nsPath,t=e.expression;_processVal(r,t)}function _processVal(e,r){if(r){if(r.clause||r.pred){var t=r.clause||r.pred;return k(e,{".expr":t}),t}throw console.error(r),"!"}throw console.error(r),"!"}function _maybeInitRegistry(){return n||clearRegistry(),n}function clearRegistry(){n=e[A]={}}function resolve(e,r){return r?v(e,r):v(e,M())}Object.defineProperty(r,"__esModule",{value:!0});var n,a=t(4),o=t(32),i=t(11),s=i.cat,u=i.or,c=i.fclause,f=i.shape,l=t(5),p=t(10),m=t(35),d=t(17),v=t(43),y=t(9),g=t(56),h=t(18),_=h.isNamespacePath,b=h.isClauseRef,x=t(27),O=x.GetNSFnClause,w=x.SetNSFnClause,E=x.NamespaceFnClause,S=x.SetMetaFnClause,P=x.GetMetaFnClause,C=c({args:s(_),ret:b}).instrument(_getUnchecked),R=f({req:{".expr":u(l,p)}}),k=c({args:s(_,R),ret:m}).instrument(function(e,r){_maybeInitRegistry();var t=g.get(n,_slashToDot(e));return g.set(n,_slashToDot(e),a({},t,r)),!0}),A="___CLAUSEJS_REGISTRY";r.clearRegistry=clearRegistry;var F=S.instrumentConformed(function(e){var r=e.source,t=r.namespacePath,o=r.expression,i=e.metaObj,s=e.registry;if(s||(s=n),t){var u=g.get(s,_slashToDot(t)),c=u&&u[".meta"];g.set(s,_slashToDot(t),a({},u,{".meta":a({},c,i)}))}else if(o){var f=y(o);f.meta=a(f.meta,i)}});r.setMeta=F;var N=P.instrumentConformed(function(e){var r=e.source,t=r.namespacePath,a=r.expression,o=e.registry;if(o||(o=n),t){var i=g.get(o,_slashToDot(t)),s=i&&i[".meta"];return s}if(a){var u=y(a);return u.meta}});r.getMeta=N,r.resolve=resolve,_maybeInitRegistry();var M=function(){return n};r.getRegistry=M;var T=E.instrumentConformed(function(e){var r=e.register,t=e.retrieve;return r?setNamespacePath(r):t?getNamespacePath(t):void 0});T.get=O.instrumentConformed(getNamespacePath),T.set=w.instrumentConformed(setNamespacePath),T.clearRegistry=clearRegistry,T.getRegistry=M,T.setMeta=F,r.default=T}).call(r,t(83))},function(e,r,t){"use strict";function ClauseRef(e){var r=e.ref,t=e.getFn,n=e.conformFn;this.type="CLAUSE_REF",this.get=t,this.conform=n,this.ref=r}var n=t(1);ClauseRef.prototype=Object.create(n.prototype),e.exports=ClauseRef},function(e,r,t){"use strict";function DelayedClause(e){var r=e.getFn;this.type="DELAYED",this.get=r;var t=this;t.instrument=function(e){var t=r();return t.instrument(e)},t.instrumentConformed=function(e){var t=r();return t.instrumentConformed(e)},t.conform=function(e){var t=r();return t.conform(e)}}var n=t(1);DelayedClause.prototype=Object.create(n.prototype),e.exports=DelayedClause},function(e,r,t){"use strict";e.exports=function(e){return function(r){return r===e}}},function(e,r,t){"use strict";function isBool(e){return"boolean"==typeof e}e.exports=isBool},function(e,r,t){"use strict";function isInt(e){return"number"==typeof e&&(Math.floor(e)===e&&e!==1/0)}e.exports=isInt},function(e,r,t){"use strict";function isNum(e){return"number"==typeof e}e.exports=isNum},function(e,r,t){"use strict";function isPlainObject(e){if(n(e)){if("function"==typeof Object.getPrototypeOf){var r=Object.getPrototypeOf(e);return r===Object.prototype||null===r}return"[object Object]"==Object.prototype.toString.call(e)}return!1}var n=t(24);e.exports=isPlainObject},function(e,r,t){"use strict";e.exports=function(){var e;if(1===arguments.length&&Array.isArray(arguments[0]))e=arguments[0];else{if(!(arguments.length>0))throw new Error("Items list is required.");e=Array.prototype.slice.call(arguments)}var r=function(r){return e.indexOf(r)>=0};return r.__predToString=function(){return"oneOf(".concat([e.map(JSON.stringify).join(", ")]).concat(")")},r}},function(e,r,t){"use strict";function delayed(e){return new n({getFn:e})}var n=t(33);e.exports=delayed},function(e,r,t){"use strict";function identity(e){return e}e.exports=identity},function(e,r,t){"use strict";var n=t(7);e.exports=function(e){return n(e)}},function(e,r,t){"use strict";function resolve(e,r){var t=_findFirst(n,function(e){var t=e[0],n=e[1];if(t===r)return n});return t||(t=_createResolveMap(r),n.push([r,t])),_resolveWithMap(t,e)}function getDefList(e){var r=_createResolveMap(e),t={};return r.forEach(function(e){var r=e[0];t[r]||(t[r]=[]),t[r].push(e)}),t}function _createResolveMap(e){var r=[],t=a.NamespaceObjClause.conform(e);return _walk(null,null,t,r),r}function _walk(e,r,t,n){var a,o=e?e+"."+r:r;for(var i in t)if(t.hasOwnProperty(i))switch(i){case"subNamespaces":a=t[i];for(var s in a)a.hasOwnProperty(s)&&_walk(o,s,a[s],n);break;case".expr":n.push([""+(e?e:""),""+r,t[".expr"]])}}function _resolveWithMap(e,r){var t=_findFirst(e,function(e){var t=e[0],n=e[1],a=e[2];if(a===r||_tryStripPredClause(a)===_tryStripPredClause(r))return t+"/"+n});return t}function _tryStripPredClause(e){return"PRED"===e.type?e.opts.predicate:e}function _findFirst(e,r){for(var t=0;t<e.length;t++){var n=r(e[t]);if(n)return n}return null}Object.defineProperty(r,"__esModule",{value:!0});var n=[],a=t(27);e.exports={resolve:resolve,getDefList:getDefList}},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t(4),a=t(31),o=t(11),i=t(18),s=t(12),u={Problem:t(2),Clause:t(1)},c=n(a.default,{resolve:a.resolve},o,i,u,s);c.VERSION=t(45),e.exports=c,r.default=c},function(e,r,t){"use strict";e.exports="0.1.1"},function(e,r,t){"use strict";function wallOp(e){var r=a(e),t=new n({type:"WALL",exprs:[r],opts:{enclosedClause:r}});return t.conform=function(e){return c(t,e,{conform:!0})},t}var n=t(1),a=t(9),o=t(8),i=o.cat,s=o.ExprClause,u=t(21),c=t(17),f=u({args:i(s),ret:s}),l=f.instrument(wallOp);e.exports={WallFnClause:f,wall:l}},function(e,r,t){"use strict";function any(){return new n({type:o,exprs:[],conformFn:a})}var n=t(1),a=t(41),o="ANY";e.exports=any},function(e,r,t){"use strict";e.exports={CAT:"CAT",OR:"OR",Z_OR_M:"Z_OR_M",Z_OR_O:"Z_OR_O",O_OR_M:"O_OR_M",PRED:"PRED",COLL_OF:"COLL_OF"}},function(e,r,t){"use strict";function maybe(e){return n(a,o,e)}var n=t(8).or,a=t(23),o=t(14);e.exports=maybe},function(e,r,t){"use strict";function evalClause(e){e=o(e);var r;if(null===e.type)throw"Clause has no type: "+e;r=e.type in s?s[e.type]:s.PRED;var t=r(e);return t}function wrapRoot(e){return new a({type:"ROOT",exprs:[e]})}var n=t(51),a=t(1),o=t(29),i=function(e){for(var r=0,t=[e.head],n=[];t.length>0;){var a=t.pop();null===a.index&&(a.index=r,r++,a.transitions.forEach(function(e){t.push(e.target)}),n.push(a))}return n},s={},u=function(e){return function(r){var t=evalClause(r.exprs[0]);return e(t)}},c=function(e){return function(r){var t=r.exprs.map(function(e){var r=evalClause(e.expr);return r.name=e.name,r});return e(t)}};["ROOT","Z_OR_M","O_OR_M","Z_OR_O"].forEach(function(e){s[e]=u(n[e])}),["OR","CAT"].forEach(function(e){s[e]=c(n[e])}),s.PRED=function(e){return n.PRED(e)};var f=function(e){var r,t=wrapRoot(e),n=evalClause(t),a=i(n),o=a.length,s={};return a.forEach(function(e){0===e.transitions.length&&(r=e.index);var t={};e.transitions.forEach(function(e){t[e.target.index]=e.clause}),s[e.index.toString()]=t}),{initialState:0,numStates:o,finalState:r,transitions:s,expression:e}};e.exports=f},function(e,r,t){"use strict";function fragmentState(e,r){return{transitions:null===e?[]:e,index:r||null}}function fragmentTransition(e,r){return{clause:e,target:r}}function fragment(e,r){return{head:e,tails:r}}function namedFragment(e,r,t){var n=fragment(r,t);return n.name=e,n}function patch(e,r){e.forEach(function(e){e.target=r})}function epsilonState(){return{isEpsilon:!0}}function namedEpsilonState(e,r,t,n){var a=epsilonState();return a.name=r,a.op=t,a.group=n,a.dir=e,a}function frontWithState(e,r){var t=fragmentTransition(e,r.head),n=fragmentState([t]),a=fragment(n,r.tails);return a}function rearWithState(e,r){var t=fragmentTransition(e,null),n=fragmentState([t],null);patch(r.tails,n);var a=fragment(r.head,[t]);return a}var n={};n.PRED=function(e){var r=fragmentTransition(e,null),t=fragmentState([r],null),n=[r],a=fragment(t,n);return a},n.OR=function(e){e=e.map(function(e){var r=namedEpsilonState("out",e.name,"OR"),t=fragmentTransition(r,null),n=fragmentState([t]);patch(e.tails,n);var a=fragmentTransition(namedEpsilonState("in",e.name,"OR"),e.head),o=fragmentState([a]),i=namedFragment(e.name,o,[t]);return i});var r=function(e,r){var t=e.head.transitions.concat(r.head.transitions),n=fragmentState(t),a=e.tails.concat(r.tails),o=namedFragment(e.name,n,a);return o},t=e.reduce(r);return t=frontWithState(namedEpsilonState("enter",null,"OR","para_in"),t),t=rearWithState(namedEpsilonState("exit",null,"OR","para_out"),t)},n.CAT=function(e){var r=function(e,r){patch(e.tails,r.head);var t=e.head,n=r.tails,a=fragment(t,n);return a};e=e.map(function(e){var r=fragmentTransition(namedEpsilonState("maybe_out",e.name,"CAT"),null),t=fragmentState([r]);patch(e.tails,t);var n=e.head.transitions.map(function(r){var t=fragmentState([r]),n=fragmentTransition(namedEpsilonState("maybe_in",e.name,"CAT"),t);return n}),a=fragmentState(n),o=namedFragment(e.name,a,[r]);return o});var t;if(e.length>0)t=e.reduce(r);else{var n=epsilonState(),a=fragmentTransition(n,null),o=fragmentState([a]);
t=fragment(o,[a])}return t=frontWithState(namedEpsilonState("maybe_enter",null,"CAT","in"),t),t=rearWithState(namedEpsilonState("maybe_exit",null,"CAT","out"),t)},n.Z_OR_M=function(e){var r="Z_OR_M",t=fragmentTransition(namedEpsilonState("loop",null,r),e.head),n=fragmentTransition(epsilonState(),null),a=fragmentState([t,n]);patch(e.tails,a);var o=fragment(a,[n]),i=o.head.transitions.map(function(e){var r=fragmentState([e]),t=fragmentTransition(epsilonState(),r);return t}),s=fragmentState(i);return o=fragment(s,o.tails),o=frontWithState(namedEpsilonState("maybe_enter",null,r,"in"),o),o=rearWithState(namedEpsilonState("maybe_exit",null,r,"out"),o)},n.O_OR_M=function(e){var r="O_OR_M",t=fragmentTransition(namedEpsilonState("loop",null,r),e.head),n=fragmentTransition(epsilonState(),null),a=fragmentState([t,n]);patch(e.tails,a);var o=fragment(e.head,[n]);return o=frontWithState(namedEpsilonState("maybe_enter",null,r,"in"),o),o=rearWithState(namedEpsilonState("maybe_exit",null,r,"out"),o)},n.Z_OR_O=function(e){var r="Z_OR_O",t=fragmentTransition(namedEpsilonState("loop",null,r),e.head),n=fragmentTransition(epsilonState(),null),a=fragmentState([t,n]),o=e.tails.concat([n]),i=fragment(a,o);return i=frontWithState(namedEpsilonState("maybe_single_enter",null,r,"in"),i),i=rearWithState(namedEpsilonState("maybe_single_exit",null,r,"out"),i)},n.ROOT=function(e){var r=fragmentState(null,null);return patch(e.tails,r),fragment(e.head,[])},e.exports=n},function(e,r,t){"use strict";function Value(e){this.value=e}function Piece(e){this.fragment=e}function GroupedPiece(e){this.fragment=e}function NamedPiece(e,r){this.fragment=r,this.name=e}function GroupedAltPiece(e){this.fragment=e}function NamedAltPiece(e,r){this.fragment=r,this.name=e}function Nothing(){}function Empty(){}function MaybeEnter(){}function GroupName(e){this.name=e}function getMatch(e,r,t){var n,a=t.conform,o=e.inputType,i=[];if(e.forEach(function(e){if(e.move)switch(e.move.dir){case"maybe_enter":i.push(new MaybeEnter);break;case"maybe_exit":for(var n=void 0,s=new Empty;!((n=i.pop())instanceof MaybeEnter);)s=_foldLeft(o,a,s,n);i.push(s);break;case"maybe_single_enter":i.push(new MaybeEnter);break;case"maybe_single_exit":var u=i.pop(),s=void 0;u instanceof MaybeEnter?s=new Nothing:(s=u,i.pop()),i.push(s);break;case"enter":break;case"exit":var n=i.pop(),s=void 0;if(a&&n instanceof NamedAltPiece){var c=void 0;n.fragment instanceof Empty?c={}:(p={},p[n.name]=n.fragment,c=p),s=new GroupedAltPiece(c)}else s=n;i.push(s);break;case"maybe_in":a&&e.move.name&&i.push(new GroupName(e.move.name));break;case"loop":break;case"maybe_out":if(a&&e.move.name){var n=i.pop(),f=i.pop();i.push(_giveName(f,n))}break;case"in":a&&e.move.name&&i.push(new GroupName(e.move.name));break;case"out":if(a&&e.move.name){var n=i.pop(),f=i.pop();i.push(_giveAltName(f,n))}break;case"clause":var l=r(e.clause,e.guide,t);i.push(new Value(l));break;default:throw console.error(e),"FUUU"}var p}),1!==i.length)throw console.error("valStack",i),"!";n=i.pop();var s;return s=n instanceof Piece?n.fragment:n instanceof GroupedPiece?n.fragment:n instanceof GroupedAltPiece?n.fragment:n instanceof Value?n.value:n instanceof Empty?_coerceToProperType(o,[]):n instanceof Nothing?null:n}function _giveName(e,r){if(r instanceof Nothing)return new NamedPiece(e.name,new Empty);if(r instanceof GroupedPiece)return new NamedPiece(e.name,r.fragment);if(r instanceof Piece||r instanceof GroupedAltPiece)return new NamedPiece(e.name,r.fragment);if(r instanceof Value)return new NamedPiece(e.name,r.value);if(r instanceof Empty)return new NamedPiece(e.name,new Empty);throw console.error(r),"c!!!"}function _giveAltName(e,r){if(r instanceof Nothing)return new NamedAltPiece(e.name,new Empty);if(r instanceof GroupedAltPiece)return new NamedAltPiece(e.name,r.fragment);if(r instanceof Piece)return new NamedAltPiece(e.name,r.fragment);if(r instanceof GroupedPiece)return new NamedAltPiece(e.name,r.fragment);if(r instanceof Value)return new NamedAltPiece(e.name,r.value);if(r instanceof Empty)return new NamedAltPiece(e.name,new Empty);throw console.error(r),"c!!!alt"}function _foldLeft(e,r,t,a){if(r&&a instanceof NamedPiece){var o=void 0;if(t instanceof Nothing)o={};else if(t)if(t instanceof Empty)o={};else if(t instanceof GroupedPiece)o=t.fragment;else if(t instanceof Piece)o=t.fragment;else{if(!(t instanceof GroupedAltPiece))throw console.error(t,a),"!!acc_fl_np";o=t.fragment}else o={};var i=void 0;a.fragment instanceof Empty?i={}:(l={},l[a.name]=a.fragment,i=l);var s=new GroupedPiece(n({},i,o));return s}var u=void 0,c=void 0;if(t instanceof Nothing)c=[];else if(t)if(t instanceof Piece)c=t.fragment;else if(t instanceof GroupedPiece)c=[t.fragment];else{if(!(t instanceof Empty))throw console.error(t),"!!acc_fl";c=[]}else c=[];if(a instanceof Value)u=[a.value];else if(a instanceof Piece)u=a.fragment;else if(a instanceof GroupedPiece)u=[a.fragment];else if(a instanceof GroupedAltPiece)u=[a.fragment];else if(a instanceof Nothing)u=[];else{if(!(a instanceof Empty))throw console.error(a),"cc!!";u=[]}var f=new Piece(_coerceToProperType(e,u.concat(c)));return f;var l}function _coerceToProperType(e,r){return"string"===e&&Array.isArray(r)?r.join(""):r}var n=t(4);e.exports=getMatch},function(e,r,t){"use strict";function simulate(e,r,t,n){for(var o={matched:!1,chain:null},i="undefined"==typeof r?"undefined":a(r),s={state:0,offset:0,input:[r],groupCount:0,arrayed:!1},u=[s];u.length>0;){var c=u.shift(),f=c.offset,l=c.input;if(c.state===e.finalState&&f===l.length)return o.matched=!0,o.chain=_getChain(e,c,i),o;for(var p in e.transitions[c.state]){var m=parseInt(p),d=_getNextMove(e,m,c,t,n);if(d)if(d.isProblem){var v=d.name,y=d.problem,g=d.position;o.lastProblem={name:v,problem:y,position:g}}else u.push(d)}}return o}function _getNextMove(e,r,t,n,a){var s=t.input,u=t.offset,c=t.groupCount,f=t.arrayed,l=s[u],p=e.transitions[t.state][r];"in"===p.group?(0===c&&(Array.isArray(s[0])||i(s[0]))&&(s=s[0],u=0,f=!0),c+=1):"out"===p.group&&(c-=1,0===c&&(f&&(u=u===s.length?1:0,s=[s]),f=!1));var m,d;m=p.isEpsilon?u:u+1;var v,y,g=p.name||t.move&&t.move.name;if(m<=s.length){if(p.isEpsilon)return d=p.dir?{dir:p.dir,name:p.name,op:p.op,group:p.group}:null,y={input:s,groupCount:c,arrayed:f,state:r,offset:m,move:d,clause:p,prev:t,isEpsilon:!0};if(v=n(p,l,a),o(v))return{isProblem:!0,problem:v,name:g,position:u};if(u<s.length)return d={dir:"clause"},y={input:s,groupCount:c,arrayed:f,state:r,offset:m,move:d,prev:t,isEpsilon:!1,clause:p,guide:v}}}function _getChain(e,r,t){for(var n,a=[],o=r;o;){if(!n||o.state!==n.state&&o.move){var i={isEpsilon:o.isEpsilon,move:o.move,state:o.state};o.isEpsilon||(i.guide=o.guide,i.clause=o.clause),a.unshift(i)}n=o,o=o.prev}return a.inputType=t,a}var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a="function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?function(e){return"undefined"==typeof e?"undefined":n(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":"undefined"==typeof e?"undefined":n(e)},o=t(0),i=t(7);e.exports=simulate},function(e,r,t){"use strict";function nullable(e){return n(a,e)}var n=t(8).or,a=t(23);e.exports=nullable},function(e,r,t){"use strict";function undefinable(e){return n(a,e)}var n=t(8).or,a=t(14);e.exports=undefinable},function(e,r,t){"use strict";function get(e,r,t){if("number"==typeof r&&(r=[r]),!r||0===r.length)return e;if(null==e)return t;if("string"==typeof r)return get(e,r.split("."),t);var n=getKey(r[0]),a=e[n];return void 0===a?t:1===r.length?a:get(e[n],r.slice(1),t)}function set(e,r,t){if("number"==typeof r&&(r=[r]),!r||0===r.length)return e;if("string"==typeof r)return set(e,r.split(".").map(getKey),t);var n=r[0],a=e[n];return 1===r.length?(e[n]=t,a):(void 0===a&&("number"==typeof r[1]?e[n]=[]:e[n]={}),set(e[n],r.slice(1),t))}function getKey(e){var r=parseInt(e);return r.toString()===e?r:e}e.exports={get:get,set:set}},function(e,r,t){"use strict";e.exports=function(e){return e&&e instanceof Date&&!isNaN(e.valueOf())}},function(e,r,t){"use strict";function isNatInt(e){return n(e)&&e>=0}var n=t(36);e.exports=isNatInt},function(e,r,t){"use strict";e.exports=function(e){return!!/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e)}},function(e,r,t){"use strict";function not(e){var r=n(e),t=function(r){return!e(r)};return r?a("not_"+r,t):t}var n=t(3),a=t(16);e.exports=not},function(e,r,t){"use strict";e.exports=function(e){return!!e&&0!==e.length}},function(e,r,t){"use strict";function betterThrow(e){throw e}e.exports=betterThrow},function(e,r,t){"use strict";var n=t(0),a=t(25);e.exports=function(e,r){var t=a(e,r);if(n(t))throw t}},function(e,r,t){"use strict";function humanReadable(e){return n(e)?e:e.type?a[e.type]?a[e.type]:e.type.toLowerCase():e.toString()}var n=t(7),a={Z_OR_M:"zeroOrMore",O_OR_M:"oneOrMore",Z_OR_O:"zeroOrOne",COLL_OF:"collOf",MAP_OF:"mapOf"};e.exports=humanReadable},function(e,r,t){"use strict";function isExpr(e){return n(e)||a(e)||o(e)||i(e)}var n=t(10),a=t(5),o=t(15),i=t(26);e.exports=isExpr},function(e,r,t){"use strict";function isFclause(e){return n(e)&&"FCLAUSE"===e.type}var n=t(5);e.exports=isFclause},function(e,r,t){"use strict";function isNamespacePath(e){return n(e)&&/^\/?[a-zA-Z0-9\-_\.]*\/([a-zA-Z0-9\-_]+)$/.test(e)}var n=t(7);e.exports=isNamespacePath},function(e,r,t){"use strict";function isValid(e,r){if(e)return o(e)?!n(i(e,r)):!a(e)||e(r);throw new Error("Clause is required")}var n=t(0),a=t(10),o=t(5),i=t(25);e.exports=isValid},function(e,r,t){"use strict";e.exports=function(e,r,t){var n=function(t){return Object.defineProperty(e,r,{value:t,enumerable:!0,writable:!0})};return Object.defineProperty(e,r,{configurable:!0,enumerable:!0,get:function(){var e=t();return n(e),e},set:function(e){n(e)}}),e}},function(e,r,t){"use strict";function repeat(e,r){var t,n=[];for(t=0;t<e;t++)n.push(r);return n}e.exports=repeat},function(e,r,t){"use strict";var n=[9,10,11,12,13,32,160,5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8232,8233,8239,8287,12288,65279];e.exports=n.reduce(function(e,r){return e+String.fromCharCode(r)},"")},function(e,r,t){"use strict";function andWalker(e,r){function andTrailblaze(e,o){for(var s=e,u=[],c=[],f=0;f<t.length;f+=1){var l=0===f?e:u[f-1];if(s=r(t[f],l,o),a(s)){c.push(s);break}var p=r(t[f],s,i({},o,{phase:"reconstruct"}));u.push(p)}return 0===c.length?{conforms:u}:new n(e,t,c,"One or more expressions failed AND test")}function andReconstruct(e){var r=e.conforms;return r[t.length-1]}var t=e.opts.conformedExprs.map(o);return{trailblaze:andTrailblaze,reconstruct:andReconstruct}}var n=t(2),a=t(0),o=t(6),i=t(4);e.exports=andWalker},function(e,r,t){"use strict";function anyWalker(){return{trailblaze:walkThroughAny,reconstruct:walkThroughAny}}function walkThroughAny(e){return e}e.exports=anyWalker},function(e,r,t){"use strict";function clauseRefWalker(e,r){function walkClauseRef(t,n){var a=e.get();if(a)return r(a,t,n)}return{trailblaze:walkClauseRef,reconstruct:walkClauseRef}}e.exports=clauseRefWalker},function(e,r,t){"use strict";function collOfWalker(e,r){function collOfTrailblaze(s,u){var c=[],f=[];if(Array.isArray(s)){if(i){var l=i.maxCount,p=i.minCount;if(o(l)&&s.length>l)return new n(s,e,f,"collOf: collection size "+s.length+" exceeds maxCount "+l+".");if(o(p)&&s.length<p)return new n(s,e,f,"collOf: collection size "+s.length+" is less than minCount "+p+".")}for(var m=0;m<s.length;m+=1){var d=r(t,s[m],u);if(a(d)){f.push(d);break}c.push(d)}return f.length>0?new n(s,e,f,"One or more elements failed collOf test"):c}return new n(s,e,[],"collOf expects an array")}function collOfReconstruct(e,n){for(var a=[],o=0;o<e.length;o+=1){var i=r(t,e[o],n);a.push(i)}return a}var t=e.exprs[0],i=e.opts;return{trailblaze:collOfTrailblaze,reconstruct:collOfReconstruct}}var n=t(2),a=t(0),o=t(37);e.exports=collOfWalker},function(e,r,t){"use strict";function delayedClauseWalker(e,r){function walkDelayedClause(t,n){var a=e.get();if(a)return r(a,t,n)}return{trailblaze:walkDelayedClause,reconstruct:walkDelayedClause}}e.exports=delayedClauseWalker},function(e,r,t){"use strict";function fclauseWalker(e,r){function fclauseTrailblaze(e){return e}function fclauseReconstruct(e,r){if(!e)throw new Error("A function must be clauseified for instrumentation.");var t=r.conform,n=r.instrument;return t&&n?instrumentConformed(e,r):n?_instrument(e,r):void 0}function _instrument(e,r){var t=o(e),n=getInstrumentedFn(t,e,r),a=i(t,n,"__instrumented");return a}function instrumentConformed(e,r){var t=o(e),n=getArgConformedInstrumentedFn(t,e,r),a=i(t,n,"__conformed");return a}function getInstrumentedFn(e,t){return function(){var n,a=Array.prototype.slice.call(arguments),o=checkArgs(t,e,a),i=t.apply(this,o),s=checkRet(t,e,i),l=u?r(u,a,{conform:!0,instrument:!0}):a;return n=c?r(c,i,{conform:!0,instrument:!0}):i,checkFnRelation(e,t,f,l,n),s}}function checkFnRelation(r,t,n,o,i){if(n){var u=n.call(null,o,i);if(!u){var c=new a({args:o,ret:i},e,[],"Function "+r+" failed valiation on argument-return value relation");s(c)}}}function checkArgs(t,o,i){var c=o||"<anonymous>";if(!u)return i;var f=r(u,i,{phase:"trailblaze"});if(!n(f))return r(u,f,{phase:"reconstruct",conform:!1,instrument:!0});var l=new a(i,e,[f],"Arguments for function "+c+"() is not valid");s(l)}function checkRet(t,o,i){var u=o||"<anonymous>";if(!c)return i;var f=r(c,i,{phase:"trailblaze"});if(!n(f)){var l=r(c,f,{phase:"reconstruct",instrument:!0,conform:!1});return l}var p=new a(i,e,[f],"Return value for function "+u+"() is not valid");s(p)}function getArgConformedInstrumentedFn(e,t){var o=e||"<anonymous>";return function(){var i=Array.prototype.slice.call(arguments),l=r(u,i,{conform:!0,instrument:!0});if(n(l)){var p=new a(i,u,[l],"Arguments for function "+o+" is not valid");s(p)}var m=t.call(this,l);if(checkRet(t,e,m),f){var d;d=c?r(c,m,{conform:!0,instrument:!0}):m,checkFnRelation(e,t,f,l,d)}return m}}var t=e.opts,u=t.args,c=t.ret,f=t.fn;return{trailblaze:fclauseTrailblaze,reconstruct:fclauseReconstruct}}var n=t(0),a=t(2),o=t(3),i=t(16),s=t(62);e.exports=fclauseWalker},function(e,r,t){"use strict";function mapOfWalker(e,r){function mapOfTrailblaze(t,n){var i={};for(var s in t)if(t.hasOwnProperty(s)){var f=r(u,s,n);if(a(f))return new o(t,e,(p={},p[s]=f,p),"mapOf: key "+s+" failed validation");var l=r(c,t[s],n);if(a(l))return new o(t,e,(m={},m[s]=l,m),"mapOf: value for key "+s+" failed validation");i[s]={expr:c,valGuide:l}}return i;var p,m}function mapOfReconstruct(e,t){var n={};for(var a in e){var o=e[a],i=o.expr,s=o.valGuide;n[a]=r(i,s,t)}return n}var t=e.opts,i=t.keyExpression,s=t.valExpression,u=i&&n(i),c=s&&n(s);return{trailblaze:mapOfTrailblaze,reconstruct:mapOfReconstruct}}var n=t(6),a=t(0),o=t(2);e.exports=mapOfWalker},function(e,r,t){"use strict";function nfaWalker(e,r){function nfaTrailblaze(a,s){t||(t=o(e));var u=n(t,a,r,s),c=u.chain,f=u.matched,l=u.lastProblem;if(f===!0)return{chain:c};var p=void 0;if(l){var m=l.name,d=l.position,v=l.problem;y={},y[m?'"'+m+'"':"<At position "+d+">"]=v,p=y}else p=[];return new i(a,e,p,"Clause "+e.type+" did not match value");var y}function nfaReconstruct(e,t){var n=e.chain,o=a(n,r,t);return o}var t;return{trailblaze:nfaTrailblaze,reconstruct:nfaReconstruct}}var n=t(53),a=t(52),o=t(50),i=t(2);e.exports=nfaWalker},function(e,r,t){"use strict";function predWalker(e){function predTraiblaze(r){var t=e.exprs[0];return t(r)?r:new a(r,e,[],"Predicate "+n(t)+"() returns false")}function predReconstruct(e){return e}return{trailblaze:predTraiblaze,reconstruct:predReconstruct}}var n=t(3),a=t(2);e.exports=predWalker},function(e,r,t){"use strict";function shapeWalker(e,r){function shapeTrailblaze(s,c){function processFieldDefs_mut(e){e:for(var t in e)if(e.hasOwnProperty(t)){var n=e[t],a=getFieldGuide(s,t,n,r,c),o=a.noop,i=a.problem,u=a.singleMatch,f=a.groupMatch;if(i){p.push([t,i]);break e}if(u)m.singles.push(u);else if(f)f.matchedKeys.length>0&&m.groups.push(f);else if(!o)throw"!"}}if(["object","function"].indexOf("undefined"==typeof s?"undefined":a(s))<0)return new u(s,e,[],"Value is not an object");t||(t=_genKeyConformer(n,i,r,c));var f=t(s);if(o(f))return f;var l,p=[],m={val:s,groups:[],singles:[]};n&&(l=n.fieldDefs),l&&processFieldDefs_mut(l);var d;if(i&&(d=i.fieldDefs),d&&processFieldDefs_mut(d,!0),p.length>0){for(var v={},y=[],g=0;g<p.length;g++){var h=p[g],_=h[0],b=h[1];y.push(_),v[_]=b}var x=new u(s,e,v,"At least one property failed validation: "+y.join(", "));return x}return m}function shapeReconstruct(e,t){var n,a=e.val,o=e.singles,i=e.groups,u={walkOpts:t},c=t.mutate;return n=c?a:s({},a),o.forEach(function(e){restoreField_mut(n,e,r,t)}),i.forEach(function(e){var a=e.name,o=e.matchedKeys;if(u){n[a]={};var i=[];o.forEach(function(e){restoreField_mut(n[a],e,r,t),i.push(e.key)}),_deleteKeys(n,i)}else o.forEach(function(e){restoreField_mut(n,e,r,t)})}),n}var t,n,i,c=e.opts.conformedArgs.shapeArgs,f=c.requiredFields,l=c.optionalFields;return f&&(n=f.req||f.required),l&&(i=l.opt||l.optional),{trailblaze:shapeTrailblaze,reconstruct:shapeReconstruct}}function restoreField_mut(e,r,t,n){var a=r.key,o=r.clause,i=r.guide;e[a]=t(o,i,n)}function _genKeyConformer(e,r,t,n){return function(r){if(e){var a,i=[],s=e.fieldDefs,c=e.keyList;if(s){a=[];for(var f in s)s.hasOwnProperty(f)&&a.push(f)}else{if(!c)throw"unsupported";a=[].concat(c)}for(var l=0;l<a.length;l++){var p=a[l];if(s&&s[p].keyValExprPair){var m=!1;e:for(var d in r)if(r.hasOwnProperty(d)){var v=_conformNamedOrExpr(d,s[p].keyValExprPair.keyExpression,t,n);if(!o(v)){m=!0;break e}}m||i.push(p)}else if(s&&s[p].valExpressionOnly)if(r.hasOwnProperty(p)){var y=_conformNamedOrExpr(r[p],s[p].valExpressionOnly,t,n);o(y)&&i.push(p)}else i.push(p);else{if(!c)throw"!";void 0===r[p]&&i.push(p)}}if(i.length>0)return new u(r,e,[],"req: keys required: "+i.join(", "))}return r}}function _deleteKeys(e,r){for(var t=0;t<r.length;t++)delete e[[r[t]]]}function getFieldGuide(e,r,t,n,a){var s=t.valExpressionOnly,u=t.keyValExprPair;if(u){var f=[],l=u.keyExpression,p=u.valExpression;e:for(var m in e)if(e.hasOwnProperty(m)){var d=_conformNamedOrExpr(m,l,n,a);if(!o(d)){if(e===e[m])continue e;var v=_conformNamedOrExpr(e[m],p,n,a);if(o(v))return{problem:v};f.push({key:m,clause:c(p),guide:v})}}return{groupMatch:{name:r,matchedKeys:f}}}if(s){var y=e[r];if(i(y)||e[r]===e)return{noop:!0};var g=_conformNamedOrExpr(y,s,n,a);return o(g)?{problem:g}:{singleMatch:{key:r,clause:c(s),guide:g}}}throw"!!"}function _conformNamedOrExpr(e,r,t,n){var a=c(r),o=t(a,e,n);return o}var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a="function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?function(e){return"undefined"==typeof e?"undefined":n(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":"undefined"==typeof e?"undefined":n(e)},o=t(0),i=t(14),s=t(4),u=t(2),c=t(6);e.exports=shapeWalker},function(e,r,t){"use strict";function wallWalker(e,r){function wallWalk(t,n){var a=e.exprs[0];return r(a,t,n)}return{trailblaze:wallWalk,reconstruct:wallWalk}}e.exports=wallWalker},function(e,r){var t;t=function(){return this}();try{t=t||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(t=window)}e.exports=t}])});